2025-06-04 15:29:10,048 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:29:10,106 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:29:10,109 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:29:10,120 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:10,120 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:29:10,131 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:10,131 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:29:10,144 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:10,144 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:29:10,160 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:10,161 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:29:10,223 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:29:10,223 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:29:10,223 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:29:10,224 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:29:10,362 - numexpr.utils - INFO - utils.py:149 - Note: NumExpr detected 32 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 16.
2025-06-04 15:29:10,362 - numexpr.utils - INFO - utils.py:162 - NumExpr defaulting to 16 threads.
2025-06-04 15:29:10,478 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:29:11,582 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:29:11,640 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:29:11,643 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:29:11,653 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:11,653 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:29:11,663 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:11,663 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:29:11,672 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:11,672 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:29:11,683 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:11,683 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:29:11,694 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:29:11,704 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:29:11,734 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:29:11,738 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:29:11,739 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:29:11,739 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:29:11,739 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:29:11,739 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:29:13,800 - celery.worker.consumer.connection - INFO - connection.py:22 - Connected to redis://localhost:6379/0
2025-06-04 15:29:13,802 - celery.worker.consumer.mingle - INFO - mingle.py:40 - mingle: searching for neighbors
2025-06-04 15:29:14,811 - celery.worker.consumer.mingle - INFO - mingle.py:49 - mingle: all alone
2025-06-04 15:29:14,827 - celery.apps.worker - INFO - worker.py:176 - celery@pop-os ready.
2025-06-04 15:29:32,748 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,748 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,748 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:29:32,765 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:32,765 - root - INFO - environment.py:45 - created environment tmpD for user cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 15:29:32,772 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:32] "POST /environment/new HTTP/1.1" 200 149 0.024429
2025-06-04 15:29:32,776 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,776 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,815 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:32] "GET /environment/16 HTTP/1.1" 200 13328 0.038976
2025-06-04 15:29:32,884 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,884 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,885 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:32] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.001118
2025-06-04 15:29:32,885 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,886 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,886 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:32] "GET /static/css/style.css HTTP/1.1" 304 184 0.000506
2025-06-04 15:29:32,892 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,893 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,893 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:29:32,893 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:29:32,893 - engineio.server - INFO - socket.py:78 - Gsf8OvJbjZDkJAfyAAAA: Sending packet OPEN data {'sid': 'Gsf8OvJbjZDkJAfyAAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:29:32,893 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:29:32,893 - engineio.server - INFO - socket.py:90 - Gsf8OvJbjZDkJAfyAAAA: Received request to upgrade to websocket
2025-06-04 15:29:32,893 - engineio.server - INFO - socket.py:219 - Gsf8OvJbjZDkJAfyAAAA: Upgrade to websocket successful
2025-06-04 15:29:32,894 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:32,894 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:32,901 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:32] "GET /environments HTTP/1.1" 200 910 0.006862
2025-06-04 15:29:32,901 - engineio.server - INFO - socket.py:39 - Gsf8OvJbjZDkJAfyAAAA: Received packet MESSAGE data 0
2025-06-04 15:29:32,902 - socketio.server - INFO - server.py:164 - emitting event "connected" to W6veEltEDiOq1rwnAAAB [/]
2025-06-04 15:29:32,902 - engineio.server - INFO - socket.py:78 - Gsf8OvJbjZDkJAfyAAAA: Sending packet MESSAGE data 2["connected",{"sid":"W6veEltEDiOq1rwnAAAB"}]
2025-06-04 15:29:32,903 - root - INFO - app.py:147 - user connected W6veEltEDiOq1rwnAAAB
2025-06-04 15:29:32,903 - engineio.server - INFO - socket.py:78 - Gsf8OvJbjZDkJAfyAAAA: Sending packet MESSAGE data 0{"sid":"W6veEltEDiOq1rwnAAAB"}
2025-06-04 15:29:37,495 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,495 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,495 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:29:37,496 - root - INFO - app.py:163 - task_create called with POST
2025-06-04 15:29:37,501 - root - INFO - task.py:65 - Creating new task with title='properties of aspiri' for user_id=cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 15:29:37,513 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:37,520 - root - INFO - task.py:85 - Successfully created task with id=61
2025-06-04 15:29:37,528 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:37,533 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:29:37,560 - celery.worker.strategy - INFO - strategy.py:161 - Task workflows.probra.probra_task[687f9d85-f7e6-4db8-8735-c46ff2a74375] received
2025-06-04 15:29:37,561 - workflows.probra - INFO - probra.py:41 - Starting probra task with payload: {'payload': 'properties of aspirin?', 'sid': 'W6veEltEDiOq1rwnAAAB', 'task_id': 61, 'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3'}
2025-06-04 15:29:37,561 - workflows.probra - INFO - probra.py:50 - User query for deeptox_agent: properties of aspirin?
2025-06-04 15:29:37,564 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:37,565 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "POST /task/new HTTP/1.1" 200 197 0.070139
2025-06-04 15:29:37,565 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent ID:                      
      [93mbbd0c797-29f3-45ab-94e1-1b7f4649[0m
      [93mc399[0m                            
2025-06-04 15:29:37,566 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Session ID: demo               
2025-06-04 15:29:37,566 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:37,567 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:29:37,567 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:37,567 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:29:37,567 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:37,571 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,571 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,575 - root - INFO - message.py:61 - Retrieved 1 messages for task_id=61
2025-06-04 15:29:37,575 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:29:37,575 - root - INFO - file.py:80 - Calling get_files with task_id=61 (type: <class 'int'>)
2025-06-04 15:29:37,576 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -*- AgentSession loaded: demo   
2025-06-04 15:29:37,577 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Processing tools for model      
2025-06-04 15:29:37,578 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=61: []
2025-06-04 15:29:37,579 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool get_chemprop         
2025-06-04 15:29:37,579 - root - WARNING - file.py:87 - No files found in DB for task_id=61
2025-06-04 15:29:37,579 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool invoke_deepsearch    
2025-06-04 15:29:37,580 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run Start:               
      [93m1f9203ae-fc19-4fb7-91bc-976685e1[0m
      [93m7d9f[0m                            
2025-06-04 15:29:37,581 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  OpenAI Response Start          
2025-06-04 15:29:37,581 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Model: gpt-[1;36m4.1[0m-[1;36m2025[0m-[1;36m04[0m-[1;36m14[0m      
2025-06-04 15:29:37,581 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ===== system =====              
2025-06-04 15:29:37,590 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m You are a specialized toxicology
      research assistant with         
      expertise in:                   
      - Chemical toxicity analysis and
      risk assessment                 
      - Scientific literature review  
      and synthesis                   
      - Statistical analysis of       
      toxicity data                   
      - Regulatory compliance and     
      safety standards                
                                      
      Your writing style is:          
      - Scientifically rigorous and   
      evidence-based                  
      - Clear and precise in technical
      terminology                     
      - Comprehensive in risk         
      assessment                      
      - Properly cited with academic  
      sources                         
                                      
      [1m<[0m[1;95minstructions[0m[39m>[0m                  
                                      
      [39mYou are a toxicology research [0m  
      [39mwriter tasked with creating [0m    
      [39mcomprehensive toxicity reports.[0m 
                                      
      [39mWorkflow:[0m                       
      [1;36m1[0m[39m. For any toxicity-related [0m    
      [39mquestion, first use get_chemprop[0m
      [39mto obtain the chemical [0m         
      [39mproperties[0m                      
                                      
      [1;36m2[0m[39m. Use these properties to [0m     
      [39menhance your search query for [0m  
      [39minvoke deepsearch[0m               
      [39m    Perform initial search to [0m  
      [39mgather clinical evidence:[0m       
      [39m   - Search for clinical studies[0m
      [39mand case reports[0m                
      [39m   - Focus on finding:[0m          
      [39m     * Sample sizes[0m             
      [39m     * Number of positive cases[0m 
      [39m     * Study durations[0m          
      [39m     * Dosage information[0m       
      [39m     * Patient demographics[0m     
      [39m     * Risk factors[0m             
      [39m   - Use specific search terms [0m 
      [39mlike:[0m                           
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m clinical [0m    
      [32mtrial [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m          
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m case study [0m  
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m adverse [0m     
      [32meffects [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m        
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m             
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m incidence rate"[0m 
                                      
      [1;36m3[0m[39m. Perform follow-up search to [0m 
      [39mgather mechanistic information:[0m 
      [39m   - Search for how chemical [0m   
      [39mproperties contribute to the [0m   
      [39mspecific toxicity[0m               
      [39m   - Look for known mechanisms [0m 
      [39mof the specific toxicity[0m        
      [39m   - Find treatment protocols [0m  
      [39mand outcomes[0m                    
      [39m   - Use specific search terms [0m 
      [39mlike:[0m                           
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m mechanism of [0m
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m             
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m pathway"[0m        
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m             
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m treatment [0m      
      [32mprotocol"[0m                       
                                      
      [1;36m4[0m[39m. Use the gathered data to:[0m    
      [39m   - Calculate beta distribution[0m
      [39mparameters from actual clinical [0m
      [39mdata[0m                            
      [39m   - Create weighted risk [0m      
      [39mestimates[0m                       
      [39m   - Determine confidence [0m      
      [39mintervals[0m                       
      [39m   - Identify risk factors and [0m 
      [39mpopulations[0m                     
                                      
      [1;36m5[0m[39m. Format your final search [0m    
      [39mquery to include:[0m               
      [39m   - How the chemical properties[0m
      [39mmay contribute to the specific [0m 
      [39mtoxicity[0m                        
      [39m   - Known mechanisms of the [0m   
      [39mspecific toxicity based on these[0m
      [39mproperties[0m                      
      [39m   - Clinical evidence and case [0m
      [39mstudies with specific data [0m     
      [39mpoints[0m                          
      [39m   - Beta distribution analysis [0m
      [39mbased on actual clinical data[0m   
      [39m   - Risk factors and [0m          
      [39mpopulations at risk[0m             
                                      
      [39mWhen provided with a JSON [0m      
      [39mreport, create a detailed [0m      
      [39mmarkdown report that follows [0m   
      [39mthis structure:[0m                 
                                      
      [1;36m1[0m[39m. Chemical Properties and [0m     
      [39mToxicity Analysis[0m               
      [39m   - Detailed analysis of how [0m  
      [39mspecific chemical properties [0m   
      [39mcontribute to the toxicity[0m      
      [39m   - Known mechanisms of the [0m   
      [39mspecific toxicity based on these[0m
      [39mproperties[0m                      
      [39m   - Evidence and references for[0m
      [39meach property-toxicity [0m         
      [39mrelationship[0m                    
                                      
      [1;36m2[0m[39m. Clinical Evidence and Case [0m  
      [39mStudies[0m                         
      [39m   - Comprehensive review of [0m   
      [39mclinical evidence[0m               
      [39m   - Detailed case studies[0m      
      [39m   - Treatment protocols and [0m   
      [39moutcomes[0m                        
      [39m   - Adverse effects [0m           
      [39mdocumentation[0m                   
      [39m   - For each study, extract:[0m   
      [39m     * Total sample size[0m        
      [39m     * Number of positive cases[0m 
      [39m     * Study duration[0m           
      [39m     * Dosage information[0m       
      [39m     * Patient demographics[0m     
      [39m     * Risk factors[0m             
                                      
      [1;36m3[0m[39m. Toxicity Risk Distribution[0m   
      [39m   - Beta distribution [0m         
      [39mcalculations based on actual [0m   
      [39mclinical data:[0m                  
      [39m     * Use sample sizes and [0m    
      [39mpositive cases from clinical [0m   
      [39mstudies[0m                         
      [39m     * Calculate α = number of [0m 
      [39mpositive cases + [0m[1;36m1[0m              
      [39m     * Calculate β = [0m[1;39m([0m[39mtotal [0m    
      [39msample size - positive cases[0m[1;39m)[0m[39m + [0m
      [1;36m1[0m                               
      [39m     * Compute mean risk = α [0m[35m/[0m[39m [0m 
      [1;39m([0m[39mα + β[0m[1;39m)[0m                         
      [39m     * Calculate [0m[1;36m95[0m[39m% confidence [0m
      [39minterval[0m                        
      [39m   - Include:[0m                   
      [39m     * Table of studies used for[0m
      [39mcalculation[0m                     
      [39m     * Weighted average based on[0m
      [39mstudy quality and sample size[0m   
      [39m     * Confidence intervals for [0m
      [39meach study[0m                      
      [39m     * Combined risk estimate[0m   
      [39m   - Each calculation must be [0m  
      [39msupported by:[0m                   
      [39m     * Title of the study[0m       
      [39m     * URL or source[0m            
      [39m     * Sample size and positive [0m
      [39mcases used[0m                      
      [39m     * How the data supports the[0m
      [39mcalculation[0m                     
      [39m     * Relevance to the specific[0m
      [39mchemical and toxicity type[0m      
                                      
      [1;36m4[0m[39m. Risk Assessment and [0m         
      [39mPopulation Analysis[0m             
      [39m   - High-risk population groups[0m
      [39m   - Specific risk factors[0m      
      [39m   - Population-specific [0m       
      [39mconsiderations[0m                  
      [39m   - Additional risk-related [0m   
      [39mnotes[0m                           
                                      
      [39mFormat Requirements:[0m            
      [39m- Use clear headers and [0m        
      [39msubheaders[0m                      
      [39m- Include proper academic [0m      
      [39mcitations[0m                       
      [39m- Present statistical data with [0m
      [39mconfidence intervals[0m            
      [39m- Ensure all data is properly [0m  
      [39mreferenced[0m                      
      [39m- Follow the provided JSON [0m     
      [39mschema structure[0m                
      [39m- Include comprehensive [0m        
      [39mreferences section[0m              
                                      
      [39mThe report must be [0m             
      [39mscientifically rigorous, [0m       
      [39mevidence-based, and strictly [0m   
      [39madhere to the provided schema [0m  
      [39mstructure.[0m                      
                                      
      [39m<[0m[35m/[0m[95minstructions[0m[39m>[0m                 
                                      
      [39m<additional_information>[0m        
      [39m- Use markdown to format your [0m  
      [39manswers.[0m                        
      [39m- The current time is [0m[1;36m2025[0m[39m-[0m[1;36m06[0m[39m-[0m[1;36m04[0m
      [1;92m15:29:37[0m[39m.[0m[1;36m580294[0m[39m.[0m                
      [39m<[0m[35m/[0m[95madditional_information[0m[1m>[0m       
2025-06-04 15:29:37,590 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ====== user ======              
2025-06-04 15:29:37,591 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m properties of aspirin?          
2025-06-04 15:29:37,593 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "GET /task/61 HTTP/1.1" 200 16457 0.021707
2025-06-04 15:29:37,656 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,657 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,657 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "GET /static/css/style.css HTTP/1.1" 304 184 0.000789
2025-06-04 15:29:37,657 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,657 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,658 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000529
2025-06-04 15:29:37,658 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,658 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,659 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000544
2025-06-04 15:29:37,675 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,676 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,676 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:29:37,676 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:29:37,676 - engineio.server - INFO - socket.py:78 - dCcRc5cQ3TyUNfzaAAAC: Sending packet OPEN data {'sid': 'dCcRc5cQ3TyUNfzaAAAC', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:29:37,676 - engineio.server - INFO - socket.py:90 - dCcRc5cQ3TyUNfzaAAAC: Received request to upgrade to websocket
2025-06-04 15:29:37,676 - engineio.server - INFO - socket.py:219 - dCcRc5cQ3TyUNfzaAAAC: Upgrade to websocket successful
2025-06-04 15:29:37,680 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:37,680 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:37,690 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:37] "GET /environments HTTP/1.1" 200 910 0.009982
2025-06-04 15:29:37,690 - engineio.server - INFO - socket.py:39 - dCcRc5cQ3TyUNfzaAAAC: Received packet MESSAGE data 0
2025-06-04 15:29:37,691 - socketio.server - INFO - server.py:164 - emitting event "connected" to heoC5aVJWdujtEjQAAAD [/]
2025-06-04 15:29:37,691 - engineio.server - INFO - socket.py:78 - dCcRc5cQ3TyUNfzaAAAC: Sending packet MESSAGE data 2["connected",{"sid":"heoC5aVJWdujtEjQAAAD"}]
2025-06-04 15:29:37,691 - root - INFO - app.py:147 - user connected heoC5aVJWdujtEjQAAAD
2025-06-04 15:29:37,691 - engineio.server - INFO - socket.py:78 - dCcRc5cQ3TyUNfzaAAAC: Sending packet MESSAGE data 0{"sid":"heoC5aVJWdujtEjQAAAD"}
2025-06-04 15:29:37,737 - engineio.server - INFO - socket.py:39 - dCcRc5cQ3TyUNfzaAAAC: Received packet MESSAGE data 2["join_task_room",{"task_id":"61"}]
2025-06-04 15:29:37,738 - socketio.server - INFO - server.py:576 - received event "join_task_room" from heoC5aVJWdujtEjQAAAD [/]
2025-06-04 15:29:37,739 - socketio.server - INFO - server.py:284 - heoC5aVJWdujtEjQAAAD is entering room task_61 [/]
2025-06-04 15:29:37,740 - root - INFO - app.py:156 - user joined task room: task_61
2025-06-04 15:29:37,740 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to heoC5aVJWdujtEjQAAAD [/]
2025-06-04 15:29:37,740 - engineio.server - INFO - socket.py:78 - dCcRc5cQ3TyUNfzaAAAC: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"61"}]
2025-06-04 15:29:39,924 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:29:39,933 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m === assistant ====              
2025-06-04 15:29:39,934 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool Calls:                     
        - ID:                         
      [32m'call_NXx1EDZ9r5oUZLYpsRZMcurq'[0m 
          Name: [32m'get_chemprop'[0m        
          Arguments: [32m'query_chemical: [0m
      [32maspirin'[0m                        
2025-06-04 15:29:39,935 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ***  METRICS  ****              
2025-06-04 15:29:39,936 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                       
      [33minput[0m=[1;36m1040[0m, [33moutput[0m=[1;36m19[0m,          
      [33mtotal[0m=[1;36m1059[0m                      
2025-06-04 15:29:39,938 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:        
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m,             
      [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m             
2025-06-04 15:29:39,939 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:    
      [1m{[0m[32m'accepted_prediction_tokens'[0m:  
      [1;36m0[0m, [32m'audio_tokens'[0m: [1;36m0[0m,           
      [32m'reasoning_tokens'[0m: [1;36m0[0m,          
      [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 15:29:39,940 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                         
      [1;36m2.[0m3389s                         
2025-06-04 15:29:39,941 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:            
      [1;36m8.1234[0m tokens/s                 
2025-06-04 15:29:39,941 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ***  METRICS  ****              
2025-06-04 15:29:39,942 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Running:                        
      [1;35mget_chemprop[0m[1m([0m[33mquery_chemical[0m=[35maspi[0m
      [35mrin[0m[1m)[0m                            
2025-06-04 15:29:40,087 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12) "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:29:40,087 - celery.redirected - WARNING - log.py:232 - Attempt 1 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12)'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:29:42,111 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12) "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:29:42,112 - celery.redirected - WARNING - log.py:232 - Attempt 2 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12)'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:29:46,141 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12) "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:29:46,142 - celery.redirected - WARNING - log.py:232 - Attempt 3 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C9H8O4/c1-6(10)13-8-5-3-2-4-7(8)9(11)12/h2-5H,1H3,(H,11,12)'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:29:46,142 - celery.redirected - WARNING - log.py:232 - All 3 attempts failed.
2025-06-04 15:29:46,146 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ====== tool ======              
2025-06-04 15:29:46,147 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool call Id:                   
      call_NXx1EDZ9r5oUZLYpsRZMcurq   
2025-06-04 15:29:46,149 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Chemprop API is temporarily     
      unavailable. Please try again   
      later.                          
2025-06-04 15:29:46,150 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *  TOOL METRICS  *              
2025-06-04 15:29:46,151 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                         
      [1;36m6.[0m2024s                         
2025-06-04 15:29:46,151 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *  TOOL METRICS  *              
2025-06-04 15:29:53,646 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:29:53,649 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m === assistant ====              
2025-06-04 15:29:53,653 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m I'm currently unable to retrieve
      the detailed chemical properties
      of aspirin due to a temporary   
      issue with my chemical property 
      lookup service. However, I can  
      provide an overview of its      
      commonly known chemical         
      properties:                     
                                      
      - Chemical Name: Acetylsalicylic
      acid                            
      - Molecular Formula: C9H8O4     
      - Molecular Weight: [1;36m180.16[0m g/mol
      - Physical Appearance: White,   
      crystalline powder or granules  
      - Melting Point: [1;36m135[0m °C [1m([0m[1;36m275[0m °F[1m)[0m
      - Solubility: Slightly soluble  
      in water, more so in ethanol and
      chloroform                      
      - LogP [1m([0moctanol/water partition 
      coefficient[1m)[0m: ~[1;36m1.19[0m, indicating 
      moderate lipophilicity          
      - pKa: [1;36m3.5[0m [1m([0macidic[1m)[0m             
      - Mechanism of Action:          
      Irreversible inhibitor of       
      cyclooxygenase [1m([0mCOX-[1;36m1[0m and       
      COX-[1;36m2[0m[1m)[0m, reducing synthesis of   
      prostaglandins and thromboxanes 
                                      
      If you have a specific toxicity 
      or risk assessment related to   
      aspirin, please specify the type
      [1m([0me.g., hepatotoxicity,          
      gastrointestinal toxicity,      
      nephrotoxicity, etc.[1m)[0m, and I    
      will proceed with a             
      comprehensive, evidence-backed  
      report following the prescribed 
      workflow and formatting         
      requirements.                   
2025-06-04 15:29:53,653 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ***  METRICS  ****              
2025-06-04 15:29:53,653 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                       
      [33minput[0m=[1;36m1081[0m, [33moutput[0m=[1;36m245[0m,         
      [33mtotal[0m=[1;36m1326[0m, [33mcached[0m=[1;36m1024[0m         
2025-06-04 15:29:53,654 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:        
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m,             
      [32m'cached_tokens'[0m: [1;36m1024[0m[1m}[0m          
2025-06-04 15:29:53,654 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:    
      [1m{[0m[32m'accepted_prediction_tokens'[0m:  
      [1;36m0[0m, [32m'audio_tokens'[0m: [1;36m0[0m,           
      [32m'reasoning_tokens'[0m: [1;36m0[0m,          
      [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 15:29:53,655 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                         
      [1;36m7.[0m4963s                         
2025-06-04 15:29:53,655 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:            
      [1;36m32.6829[0m tokens/s                
2025-06-04 15:29:53,655 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ***  METRICS  ****              
2025-06-04 15:29:53,656 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  OpenAI Response End            
2025-06-04 15:29:53,656 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added RunResponse to Memory     
2025-06-04 15:29:53,900 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.agno.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-06-04 15:29:53,903 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run End:                 
      [93m1f9203ae-fc19-4fb7-91bc-976685e1[0m
      [93m7d9f[0m                            
2025-06-04 15:29:53,904 - workflows.probra - INFO - probra.py:78 - File creating in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_265bdc447355447292d252adb69cd403.md for task 61
2025-06-04 15:29:53,905 - workflows.probra - INFO - probra.py:82 - File created in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_265bdc447355447292d252adb69cd403.md for task 61
2025-06-04 15:29:53,905 - root - INFO - app.py:92 - Redis event: {'type': 'task_message', 'data': {'role': 'assistant', 'content': "I'm currently unable to retrieve the detailed chemical properties of aspirin due to a temporary issue with my chemical property lookup service. However, I can provide an overview of its commonly known chemical properties:\n\n- Chemical Name: Acetylsalicylic acid\n- Molecular Formula: C9H8O4\n- Molecular Weight: 180.16 g/mol\n- Physical Appearance: White, crystalline powder or granules\n- Melting Point: 135 °C (275 °F)\n- Solubility: Slightly soluble in water, more so in ethanol and chloroform\n- LogP (octanol/water partition coefficient): ~1.19, indicating moderate lipophilicity\n- pKa: 3.5 (acidic)\n- Mechanism of Action: Irreversible inhibitor of cyclooxygenase (COX-1 and COX-2), reducing synthesis of prostaglandins and thromboxanes\n\nIf you have a specific toxicity or risk assessment related to aspirin, please specify the type (e.g., hepatotoxicity, gastrointestinal toxicity, nephrotoxicity, etc.), and I will proceed with a comprehensive, evidence-backed report following the prescribed workflow and formatting requirements."}, 'task_id': 61}
2025-06-04 15:29:53,905 - workflows.probra - INFO - probra.py:86 - File creating in DB: /home/kyu/Documents/toxindex/tmp/probra_result_265bdc447355447292d252adb69cd403.md for task 61
2025-06-04 15:29:53,905 - root - INFO - file.py:45 - DB ENV (create_file): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:29:53,905 - root - INFO - file.py:46 - Storing file for task_id=61, filename=probra_result_265bdc447355447292d252adb69cd403.md
2025-06-04 15:29:53,910 - root - INFO - message.py:48 - Storing message for task_id=61, user_id=None, role=assistant
2025-06-04 15:29:53,910 - root - INFO - file.py:53 - Successfully inserted file for task_id=61, filename=probra_result_265bdc447355447292d252adb69cd403.md
2025-06-04 15:29:53,910 - workflows.probra - INFO - probra.py:88 - File registered in DB: /home/kyu/Documents/toxindex/tmp/probra_result_265bdc447355447292d252adb69cd403.md for task 61
2025-06-04 15:29:53,910 - workflows.probra - INFO - probra.py:106 - Task completed successfully
2025-06-04 15:29:53,913 - celery.app.trace - INFO - trace.py:128 - Task workflows.probra.probra_task[687f9d85-f7e6-4db8-8735-c46ff2a74375] succeeded in 16.352226421000523s: {'done': True}
2025-06-04 15:29:53,918 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:29:53,918 - root - INFO - message.py:71 - Stored message for task_id=61 from role=assistant
2025-06-04 15:29:53,918 - socketio.server - INFO - server.py:164 - emitting event "task_message" to task_61 [/]
2025-06-04 15:29:53,918 - engineio.server - INFO - socket.py:78 - dCcRc5cQ3TyUNfzaAAAC: Sending packet MESSAGE data 2["task_message",{"role":"assistant","content":"I'm currently unable to retrieve the detailed chemical properties of aspirin due to a temporary issue with my chemical property lookup service. However, I can provide an overview of its commonly known chemical properties:\n\n- Chemical Name: Acetylsalicylic acid\n- Molecular Formula: C9H8O4\n- Molecular Weight: 180.16 g/mol\n- Physical Appearance: White, crystalline powder or granules\n- Melting Point: 135 \u00b0C (275 \u00b0F)\n- Solubility: Slightly soluble in water, more so in ethanol and chloroform\n- LogP (octanol/water partition coefficient): ~1.19, indicating moderate lipophilicity\n- pKa: 3.5 (acidic)\n- Mechanism of Action: Irreversible inhibitor of cyclooxygenase (COX-1 and COX-2), reducing synthesis of prostaglandins and thromboxanes\n\nIf you have a specific toxicity or risk assessment related to aspirin, please specify the type (e.g., hepatotoxicity, gastrointestinal toxicity, nephrotoxicity, etc.), and I will proceed with a comprehensive, evidence-backed report following the prescribed workflow and formatting requirements."}]
2025-06-04 15:29:53,919 - root - INFO - app.py:121 - task_message sent to task_61
2025-06-04 15:29:56,338 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:56,339 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:56,339 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:29:56,340 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:56] "POST /log_tab_switch HTTP/1.1" 404 331 0.001511
2025-06-04 15:29:57,504 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:57,504 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:29:57,504 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:57,511 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,511 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,517 - root - INFO - message.py:61 - Retrieved 2 messages for task_id=61
2025-06-04 15:29:57,517 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:29:57,517 - root - INFO - file.py:80 - Calling get_files with task_id=61 (type: <class 'int'>)
2025-06-04 15:29:57,523 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=61: []
2025-06-04 15:29:57,523 - root - WARNING - file.py:87 - No files found in DB for task_id=61
2025-06-04 15:29:57,529 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:57] "GET /task/61 HTTP/1.1" 200 18915 0.018301
2025-06-04 15:29:57,549 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,550 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,552 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:57] "GET /static/css/style.css HTTP/1.1" 304 184 0.002972
2025-06-04 15:29:57,553 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,553 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,554 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:57] "GET /static/css/chat.css HTTP/1.1" 304 182 0.001122
2025-06-04 15:29:57,554 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,554 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,555 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:57] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.001086
2025-06-04 15:29:57,579 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,580 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,580 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:29:57,580 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:29:57,580 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet OPEN data {'sid': 'D1MWP3mrZiJNewDAAAAE', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:29:57,581 - engineio.server - INFO - socket.py:90 - D1MWP3mrZiJNewDAAAAE: Received request to upgrade to websocket
2025-06-04 15:29:57,581 - engineio.server - INFO - socket.py:219 - D1MWP3mrZiJNewDAAAAE: Upgrade to websocket successful
2025-06-04 15:29:57,584 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:29:57,585 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:29:57,585 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:57,585 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:57,593 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:57] "GET /environments HTTP/1.1" 200 910 0.008041
2025-06-04 15:29:57,593 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet MESSAGE data 0
2025-06-04 15:29:57,594 - socketio.server - INFO - server.py:164 - emitting event "connected" to 6z5HTDf3t4e9e5DiAAAF [/]
2025-06-04 15:29:57,594 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet MESSAGE data 2["connected",{"sid":"6z5HTDf3t4e9e5DiAAAF"}]
2025-06-04 15:29:57,594 - root - INFO - app.py:147 - user connected 6z5HTDf3t4e9e5DiAAAF
2025-06-04 15:29:57,594 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet MESSAGE data 0{"sid":"6z5HTDf3t4e9e5DiAAAF"}
2025-06-04 15:29:57,659 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet MESSAGE data 2["join_task_room",{"task_id":"61"}]
2025-06-04 15:29:57,659 - socketio.server - INFO - server.py:576 - received event "join_task_room" from 6z5HTDf3t4e9e5DiAAAF [/]
2025-06-04 15:29:57,659 - socketio.server - INFO - server.py:284 - 6z5HTDf3t4e9e5DiAAAF is entering room task_61 [/]
2025-06-04 15:29:57,660 - root - INFO - app.py:156 - user joined task room: task_61
2025-06-04 15:29:57,660 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to 6z5HTDf3t4e9e5DiAAAF [/]
2025-06-04 15:29:57,660 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"61"}]
2025-06-04 15:29:58,530 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:29:58,531 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:29:58,531 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:29:58,532 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:29:58] "POST /log_tab_switch HTTP/1.1" 404 331 0.001701
2025-06-04 15:30:22,584 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:30:22,587 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:30:47,588 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:30:47,589 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:31:12,593 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:31:12,594 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:31:37,595 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:31:37,598 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:32:02,602 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:32:02,604 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:32:27,606 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:32:27,607 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:32:52,613 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:32:52,615 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:33:17,617 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:33:17,620 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:33:42,625 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:33:42,627 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:34:07,629 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:34:07,631 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:34:32,636 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:34:32,638 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:34:57,641 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:34:57,643 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:35:22,648 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:35:22,651 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:35:47,654 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:35:47,656 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:36:12,662 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:36:12,664 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:36:37,667 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:36:37,669 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:37:02,675 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:37:02,698 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:37:27,701 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:37:27,703 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:37:52,708 - engineio.server - INFO - socket.py:78 - D1MWP3mrZiJNewDAAAAE: Sending packet PING data None
2025-06-04 15:37:52,710 - engineio.server - INFO - socket.py:39 - D1MWP3mrZiJNewDAAAAE: Received packet PONG data 
2025-06-04 15:38:32,668 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:38:32,730 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:38:32,733 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:38:32,739 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:32,739 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:38:32,749 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:32,749 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:38:32,758 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:32,759 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:38:32,767 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:32,767 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:38:32,821 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:38:32,821 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:38:32,821 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:38:32,821 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:38:32,821 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:38:32,822 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:38:32,969 - numexpr.utils - INFO - utils.py:149 - Note: NumExpr detected 32 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 16.
2025-06-04 15:38:32,969 - numexpr.utils - INFO - utils.py:162 - NumExpr defaulting to 16 threads.
2025-06-04 15:38:33,120 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:38:34,204 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:38:34,264 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:38:34,266 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:38:34,276 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:34,276 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:38:34,286 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:34,286 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:38:34,296 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:34,296 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:38:34,306 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:34,307 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:38:34,320 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:38:34,332 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:38:36,379 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:38:36,383 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:38:36,384 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:38:36,384 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:38:36,384 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:38:36,384 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:38:36,846 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:36,846 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:36,846 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:38:36,846 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:38:36,846 - engineio.server - INFO - socket.py:78 - 6loyUVEY0dzFxLq4AAAA: Sending packet OPEN data {'sid': '6loyUVEY0dzFxLq4AAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:38:36,846 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:38:36,846 - engineio.server - INFO - socket.py:90 - 6loyUVEY0dzFxLq4AAAA: Received request to upgrade to websocket
2025-06-04 15:38:36,847 - engineio.server - INFO - socket.py:219 - 6loyUVEY0dzFxLq4AAAA: Upgrade to websocket successful
2025-06-04 15:38:36,848 - engineio.server - INFO - socket.py:39 - 6loyUVEY0dzFxLq4AAAA: Received packet MESSAGE data 0
2025-06-04 15:38:36,849 - socketio.server - INFO - server.py:164 - emitting event "connected" to odtGYcnDbsE7_9KzAAAB [/]
2025-06-04 15:38:36,849 - engineio.server - INFO - socket.py:78 - 6loyUVEY0dzFxLq4AAAA: Sending packet MESSAGE data 2["connected",{"sid":"odtGYcnDbsE7_9KzAAAB"}]
2025-06-04 15:38:36,850 - root - INFO - app.py:147 - user connected odtGYcnDbsE7_9KzAAAB
2025-06-04 15:38:36,850 - engineio.server - INFO - socket.py:78 - 6loyUVEY0dzFxLq4AAAA: Sending packet MESSAGE data 0{"sid":"odtGYcnDbsE7_9KzAAAB"}
2025-06-04 15:38:36,891 - engineio.server - INFO - socket.py:39 - 6loyUVEY0dzFxLq4AAAA: Received packet MESSAGE data 2["join_task_room",{"task_id":"61"}]
2025-06-04 15:38:36,891 - socketio.server - INFO - server.py:576 - received event "join_task_room" from odtGYcnDbsE7_9KzAAAB [/]
2025-06-04 15:38:36,891 - socketio.server - INFO - server.py:284 - odtGYcnDbsE7_9KzAAAB is entering room task_61 [/]
2025-06-04 15:38:36,892 - root - INFO - app.py:156 - user joined task room: task_61
2025-06-04 15:38:36,892 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to odtGYcnDbsE7_9KzAAAB [/]
2025-06-04 15:38:36,892 - engineio.server - INFO - socket.py:78 - 6loyUVEY0dzFxLq4AAAA: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"61"}]
2025-06-04 15:38:38,180 - celery.worker.consumer.connection - INFO - connection.py:22 - Connected to redis://localhost:6379/0
2025-06-04 15:38:38,183 - celery.worker.consumer.mingle - INFO - mingle.py:40 - mingle: searching for neighbors
2025-06-04 15:38:39,193 - celery.worker.consumer.mingle - INFO - mingle.py:49 - mingle: all alone
2025-06-04 15:38:39,203 - celery.apps.worker - INFO - worker.py:176 - celery@pop-os ready.
2025-06-04 15:38:52,166 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:52,166 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:38:52,166 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:52,171 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:52,171 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:52,196 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:52] "GET /environment/16 HTTP/1.1" 200 13414 0.025213
2025-06-04 15:38:52,213 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:52,213 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:52,214 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:52] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.001091
2025-06-04 15:38:52,214 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:52,215 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:52,215 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:52] "GET /static/css/style.css HTTP/1.1" 304 184 0.000553
2025-06-04 15:38:52,222 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:52,222 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:52,223 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:38:52,223 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:38:52,223 - engineio.server - INFO - socket.py:78 - 6NiKVU19yAtZe-QVAAAC: Sending packet OPEN data {'sid': '6NiKVU19yAtZe-QVAAAC', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:38:52,223 - engineio.server - INFO - socket.py:90 - 6NiKVU19yAtZe-QVAAAC: Received request to upgrade to websocket
2025-06-04 15:38:52,223 - engineio.server - INFO - socket.py:219 - 6NiKVU19yAtZe-QVAAAC: Upgrade to websocket successful
2025-06-04 15:38:52,225 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:52,225 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:52,233 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:52] "GET /environments HTTP/1.1" 200 910 0.008011
2025-06-04 15:38:52,234 - engineio.server - INFO - socket.py:39 - 6NiKVU19yAtZe-QVAAAC: Received packet MESSAGE data 0
2025-06-04 15:38:52,234 - socketio.server - INFO - server.py:164 - emitting event "connected" to y7XVX9lOI-VnPOMpAAAD [/]
2025-06-04 15:38:52,234 - engineio.server - INFO - socket.py:78 - 6NiKVU19yAtZe-QVAAAC: Sending packet MESSAGE data 2["connected",{"sid":"y7XVX9lOI-VnPOMpAAAD"}]
2025-06-04 15:38:52,235 - root - INFO - app.py:147 - user connected y7XVX9lOI-VnPOMpAAAD
2025-06-04 15:38:52,235 - engineio.server - INFO - socket.py:78 - 6NiKVU19yAtZe-QVAAAC: Sending packet MESSAGE data 0{"sid":"y7XVX9lOI-VnPOMpAAAD"}
2025-06-04 15:38:57,051 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,051 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,051 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:38:57,052 - root - INFO - app.py:163 - task_create called with POST
2025-06-04 15:38:57,058 - root - INFO - task.py:65 - Creating new task with title='properties of gentam' for user_id=cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 15:38:57,067 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:57,073 - root - INFO - task.py:85 - Successfully created task with id=62
2025-06-04 15:38:57,080 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:57,084 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:38:57,090 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:38:57,091 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:57,105 - celery.worker.strategy - INFO - strategy.py:161 - Task workflows.probra.probra_task[e1590d5d-0b54-499c-892d-563e57aeaff8] received
2025-06-04 15:38:57,106 - workflows.probra - INFO - probra.py:41 - Starting probra task with payload: {'payload': 'properties of gentamicin?', 'sid': 'y7XVX9lOI-VnPOMpAAAD', 'task_id': 62, 'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3'}
2025-06-04 15:38:57,107 - workflows.probra - INFO - probra.py:50 - User query for deeptox_agent: properties of gentamicin?
2025-06-04 15:38:57,109 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:38:57,110 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "POST /task/new HTTP/1.1" 200 197 0.059143
2025-06-04 15:38:57,110 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent ID:                                
      [93m3c59d7c8-fcfe-4aee-b53a-82fa58c7be59[0m      
2025-06-04 15:38:57,111 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ***** Session ID: demo *****              
2025-06-04 15:38:57,112 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:57,112 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:38:57,112 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:57,112 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:38:57,112 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:38:57,115 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,115 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,119 - root - INFO - message.py:61 - Retrieved 1 messages for task_id=62
2025-06-04 15:38:57,119 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:38:57,119 - root - INFO - file.py:80 - Calling get_files with task_id=62 (type: <class 'int'>)
2025-06-04 15:38:57,121 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -*- AgentSession loaded: demo             
2025-06-04 15:38:57,122 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Processing tools for model                
2025-06-04 15:38:57,122 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=62: []
2025-06-04 15:38:57,122 - root - WARNING - file.py:87 - No files found in DB for task_id=62
2025-06-04 15:38:57,124 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool get_chemprop                   
2025-06-04 15:38:57,125 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool invoke_deepsearch              
2025-06-04 15:38:57,125 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run Start:                         
      [93md7b1a44e-e40b-4f78-aab8-2ee0ec88f80f[0m      
2025-06-04 15:38:57,126 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -- OpenAI Response Start ---              
2025-06-04 15:38:57,126 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Model: gpt-[1;36m4.1[0m-[1;36m2025[0m-[1;36m04[0m-[1;36m14[0m -              
2025-06-04 15:38:57,127 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== system ==========              
2025-06-04 15:38:57,135 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m You are a specialized toxicology research 
      assistant with expertise in:              
      - Chemical toxicity analysis and risk     
      assessment                                
      - Scientific literature review and        
      synthesis                                 
      - Statistical analysis of toxicity data   
      - Regulatory compliance and safety        
      standards                                 
                                                
      Your writing style is:                    
      - Scientifically rigorous and             
      evidence-based                            
      - Clear and precise in technical          
      terminology                               
      - Comprehensive in risk assessment        
      - Properly cited with academic sources    
                                                
      [1m<[0m[1;95minstructions[0m[39m>[0m                            
                                                
      [39mYou are a toxicology research writer [0m     
      [39mtasked with creating comprehensive [0m       
      [39mtoxicity reports.[0m                         
                                                
      [39mWorkflow:[0m                                 
      [1;36m1[0m[39m. For any toxicity-related question, [0m    
      [39mfirst use get_chemprop to obtain the [0m     
      [39mchemical properties[0m                       
                                                
      [1;36m2[0m[39m. Use these properties to enhance your [0m  
      [39msearch query for invoke deepsearch[0m        
      [39m    Perform initial search to gather [0m     
      [39mclinical evidence:[0m                        
      [39m   - Search for clinical studies and case [0m
      [39mreports[0m                                   
      [39m   - Focus on finding:[0m                    
      [39m     * Sample sizes[0m                       
      [39m     * Number of positive cases[0m           
      [39m     * Study durations[0m                    
      [39m     * Dosage information[0m                 
      [39m     * Patient demographics[0m               
      [39m     * Risk factors[0m                       
      [39m   - Use specific search terms like:[0m      
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m clinical trial [0m        
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                          
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m case study [0m            
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                          
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m adverse effects [0m       
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                          
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m       
      [32mincidence rate"[0m                           
                                                
      [1;36m3[0m[39m. Perform follow-up search to gather [0m    
      [39mmechanistic information:[0m                  
      [39m   - Search for how chemical properties [0m  
      [39mcontribute to the specific toxicity[0m       
      [39m   - Look for known mechanisms of the [0m    
      [39mspecific toxicity[0m                         
      [39m   - Find treatment protocols and outcomes[0m
      [39m   - Use specific search terms like:[0m      
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m mechanism of [0m          
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                          
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m       
      [32mpathway"[0m                                  
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m       
      [32mtreatment protocol"[0m                       
                                                
      [1;36m4[0m[39m. Use the gathered data to:[0m              
      [39m   - Calculate beta distribution [0m         
      [39mparameters from actual clinical data[0m      
      [39m   - Create weighted risk estimates[0m       
      [39m   - Determine confidence intervals[0m       
      [39m   - Identify risk factors and populations[0m
                                                
      [1;36m5[0m[39m. Format your final search query to [0m     
      [39minclude:[0m                                  
      [39m   - How the chemical properties may [0m     
      [39mcontribute to the specific toxicity[0m       
      [39m   - Known mechanisms of the specific [0m    
      [39mtoxicity based on these properties[0m        
      [39m   - Clinical evidence and case studies [0m  
      [39mwith specific data points[0m                 
      [39m   - Beta distribution analysis based on [0m 
      [39mactual clinical data[0m                      
      [39m   - Risk factors and populations at risk[0m 
                                                
      [39mWhen provided with a JSON report, create a[0m
      [39mdetailed markdown report that follows this[0m
      [39mstructure:[0m                                
                                                
      [1;36m1[0m[39m. Chemical Properties and Toxicity [0m      
      [39mAnalysis[0m                                  
      [39m   - Detailed analysis of how specific [0m   
      [39mchemical properties contribute to the [0m    
      [39mtoxicity[0m                                  
      [39m   - Known mechanisms of the specific [0m    
      [39mtoxicity based on these properties[0m        
      [39m   - Evidence and references for each [0m    
      [39mproperty-toxicity relationship[0m            
                                                
      [1;36m2[0m[39m. Clinical Evidence and Case Studies[0m     
      [39m   - Comprehensive review of clinical [0m    
      [39mevidence[0m                                  
      [39m   - Detailed case studies[0m                
      [39m   - Treatment protocols and outcomes[0m     
      [39m   - Adverse effects documentation[0m        
      [39m   - For each study, extract:[0m             
      [39m     * Total sample size[0m                  
      [39m     * Number of positive cases[0m           
      [39m     * Study duration[0m                     
      [39m     * Dosage information[0m                 
      [39m     * Patient demographics[0m               
      [39m     * Risk factors[0m                       
                                                
      [1;36m3[0m[39m. Toxicity Risk Distribution[0m             
      [39m   - Beta distribution calculations based [0m
      [39mon actual clinical data:[0m                  
      [39m     * Use sample sizes and positive cases[0m
      [39mfrom clinical studies[0m                     
      [39m     * Calculate α = number of positive [0m  
      [39mcases + [0m[1;36m1[0m                                 
      [39m     * Calculate β = [0m[1;39m([0m[39mtotal sample size - [0m
      [39mpositive cases[0m[1;39m)[0m[39m + [0m[1;36m1[0m                       
      [39m     * Compute mean risk = α [0m[35m/[0m[39m [0m[1;39m([0m[39mα + β[0m[1;39m)[0m    
      [39m     * Calculate [0m[1;36m95[0m[39m% confidence interval[0m  
      [39m   - Include:[0m                             
      [39m     * Table of studies used for [0m         
      [39mcalculation[0m                               
      [39m     * Weighted average based on study [0m   
      [39mquality and sample size[0m                   
      [39m     * Confidence intervals for each study[0m
      [39m     * Combined risk estimate[0m             
      [39m   - Each calculation must be supported [0m  
      [39mby:[0m                                       
      [39m     * Title of the study[0m                 
      [39m     * URL or source[0m                      
      [39m     * Sample size and positive cases used[0m
      [39m     * How the data supports the [0m         
      [39mcalculation[0m                               
      [39m     * Relevance to the specific chemical [0m
      [39mand toxicity type[0m                         
                                                
      [1;36m4[0m[39m. Risk Assessment and Population Analysis[0m
      [39m   - High-risk population groups[0m          
      [39m   - Specific risk factors[0m                
      [39m   - Population-specific considerations[0m   
      [39m   - Additional risk-related notes[0m        
                                                
      [39mFormat Requirements:[0m                      
      [39m- Use clear headers and subheaders[0m        
      [39m- Include proper academic citations[0m       
      [39m- Present statistical data with confidence[0m
      [39mintervals[0m                                 
      [39m- Ensure all data is properly referenced[0m  
      [39m- Follow the provided JSON schema [0m        
      [39mstructure[0m                                 
      [39m- Include comprehensive references section[0m
                                                
      [39mThe report must be scientifically [0m        
      [39mrigorous, evidence-based, and strictly [0m   
      [39madhere to the provided schema structure.[0m  
                                                
      [39m<[0m[35m/[0m[95minstructions[0m[39m>[0m                           
                                                
      [39m<additional_information>[0m                  
      [39m- Use markdown to format your answers.[0m    
      [39m- The current time is [0m[1;36m2025[0m[39m-[0m[1;36m06[0m[39m-[0m[1;36m04[0m[39m [0m         
      [1;92m15:38:57[0m[39m.[0m[1;36m125501[0m[39m.[0m                          
      [39m<[0m[35m/[0m[95madditional_information[0m[1m>[0m                 
2025-06-04 15:38:57,135 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "GET /task/62 HTTP/1.1" 200 16460 0.019562
2025-06-04 15:38:57,135 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m =========== user ===========              
2025-06-04 15:38:57,136 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m properties of gentamicin?                 
2025-06-04 15:38:57,187 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,187 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,188 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "GET /static/css/style.css HTTP/1.1" 304 184 0.000983
2025-06-04 15:38:57,188 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,188 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,189 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000603
2025-06-04 15:38:57,189 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,189 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,190 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000529
2025-06-04 15:38:57,200 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,200 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,200 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:38:57,200 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:38:57,200 - engineio.server - INFO - socket.py:78 - adyddR5Yv5opXkHLAAAE: Sending packet OPEN data {'sid': 'adyddR5Yv5opXkHLAAAE', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:38:57,201 - engineio.server - INFO - socket.py:90 - adyddR5Yv5opXkHLAAAE: Received request to upgrade to websocket
2025-06-04 15:38:57,201 - engineio.server - INFO - socket.py:219 - adyddR5Yv5opXkHLAAAE: Upgrade to websocket successful
2025-06-04 15:38:57,203 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:38:57,203 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:38:57,212 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:38:57] "GET /environments HTTP/1.1" 200 910 0.009085
2025-06-04 15:38:57,212 - engineio.server - INFO - socket.py:39 - adyddR5Yv5opXkHLAAAE: Received packet MESSAGE data 0
2025-06-04 15:38:57,213 - socketio.server - INFO - server.py:164 - emitting event "connected" to X_QyHMaZQcIs27-VAAAF [/]
2025-06-04 15:38:57,213 - engineio.server - INFO - socket.py:78 - adyddR5Yv5opXkHLAAAE: Sending packet MESSAGE data 2["connected",{"sid":"X_QyHMaZQcIs27-VAAAF"}]
2025-06-04 15:38:57,213 - root - INFO - app.py:147 - user connected X_QyHMaZQcIs27-VAAAF
2025-06-04 15:38:57,213 - engineio.server - INFO - socket.py:78 - adyddR5Yv5opXkHLAAAE: Sending packet MESSAGE data 0{"sid":"X_QyHMaZQcIs27-VAAAF"}
2025-06-04 15:38:57,256 - engineio.server - INFO - socket.py:39 - adyddR5Yv5opXkHLAAAE: Received packet MESSAGE data 2["join_task_room",{"task_id":"62"}]
2025-06-04 15:38:57,257 - socketio.server - INFO - server.py:576 - received event "join_task_room" from X_QyHMaZQcIs27-VAAAF [/]
2025-06-04 15:38:57,258 - socketio.server - INFO - server.py:284 - X_QyHMaZQcIs27-VAAAF is entering room task_62 [/]
2025-06-04 15:38:57,258 - root - INFO - app.py:156 - user joined task room: task_62
2025-06-04 15:38:57,258 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to X_QyHMaZQcIs27-VAAAF [/]
2025-06-04 15:38:57,258 - engineio.server - INFO - socket.py:78 - adyddR5Yv5opXkHLAAAE: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"62"}]
2025-06-04 15:38:58,081 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:38:58,093 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======== assistant =========              
2025-06-04 15:38:58,094 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool Calls:                               
        - ID: [32m'call_VTQ9JnprU4F7CSe1hwnBLBgI'[0m   
          Name: [32m'get_chemprop'[0m                  
          Arguments: [32m'query_chemical: [0m          
      [32mgentamicin'[0m                               
2025-06-04 15:38:58,095 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ********  METRICS  *********              
2025-06-04 15:38:58,096 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                      [33minput[0m=[1;36m1042[0m,
      [33moutput[0m=[1;36m20[0m, [33mtotal[0m=[1;36m1062[0m                     
2025-06-04 15:38:58,097 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:                  
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m   
2025-06-04 15:38:58,098 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:              
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,         
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: [1;36m0[0m, 
      [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m          
2025-06-04 15:38:58,098 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m0.[0m9539s    
2025-06-04 15:38:58,099 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m20.9664[0m    
      tokens/s                                  
2025-06-04 15:38:58,099 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ********  METRICS  *********              
2025-06-04 15:38:58,100 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Running:                                  
      [1;35mget_chemprop[0m[1m([0m[33mquery_chemical[0m=[35mgentamicin[0m[1m)[0m   
2025-06-04 15:38:58,277 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:38:58,278 - celery.redirected - WARNING - log.py:232 - Attempt 1 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:39:00,300 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:39:00,300 - celery.redirected - WARNING - log.py:232 - Attempt 2 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:39:04,330 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:39:04,330 - celery.redirected - WARNING - log.py:232 - Attempt 3 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C21H43N5O7/c1-9(25-3)13-6-5-10(22)19(31-13)32-16-11(23)7-12(24)17(14(16)27)33-20-15(28)18(26-4)21(2,29)8-30-20/h9-20,25-29H,5-8,22-24H2,1-4H3'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:39:04,331 - celery.redirected - WARNING - log.py:232 - All 3 attempts failed.
2025-06-04 15:39:04,334 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m =========== tool ===========              
2025-06-04 15:39:04,335 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool call Id:                             
      call_VTQ9JnprU4F7CSe1hwnBLBgI             
2025-06-04 15:39:04,337 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Chemprop API is temporarily unavailable.  
      Please try again later.                   
2025-06-04 15:39:04,338 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ******  TOOL METRICS  ******              
2025-06-04 15:39:04,339 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m6.[0m2324s    
2025-06-04 15:39:04,341 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ******  TOOL METRICS  ******              
2025-06-04 15:39:08,865 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:39:08,868 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======== assistant =========              
2025-06-04 15:39:08,872 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m I am currently unable to access the       
      chemical property database. However, I can
      provide a brief overview of gentamicin's  
      properties based on standard scientific   
      knowledge:                                
                                                
      Gentamicin is an aminoglycoside antibiotic
      commonly used to treat serious bacterial  
      infections. Its principal characteristics 
      include:                                  
                                                
      - Molecular Formula: C21H43N5O7           
      - Structure: Mixture of several related   
      gentamicin components [1m([0mmainly gentamicin  
      C1, C1a, and C2[1m)[0m                          
      - Molecular Weight: ~[1;36m477.6[0m g/mol [1m([0mmain    
      component[1m)[0m                                
      - Physical State: White to off-white,     
      amorphous powder [1m([0musually supplied as     
      gentamicin sulfate, a water-soluble salt[1m)[0m 
      - Solubility: Highly soluble in water,    
      insoluble in organic solvents             
      - Mechanism of Action: Binds to the 30S   
      subunit of bacterial ribosomes, inhibiting
      protein synthesis and leading to cell     
      death [1m([0mbactericidal[1m)[0m                      
      - Absorption: Poorly absorbed orally;     
      typically administered intravenously,     
      intramuscularly, or topically             
      - Elimination: Primarily renal [1m([0munchanged 
      in urine[1m)[0m                                 
      - Toxicity Concerns: Nephrotoxicity and   
      ototoxicity [1m([0mrenal and auditory/vestibular
      toxicity[1m)[0m are the most significant        
      clinical concerns                         
                                                
      If you need a full toxicity assessment or 
      clinical toxicity analysis, please specify
      the type of toxicity [1m([0me.g.,               
      nephrotoxicity, ototoxicity[1m)[0m, and I will  
      attempt to provide a structured report    
      using current scientific literature.      
2025-06-04 15:39:08,873 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ********  METRICS  *********              
2025-06-04 15:39:08,873 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                      [33minput[0m=[1;36m1084[0m,
      [33moutput[0m=[1;36m303[0m, [33mtotal[0m=[1;36m1387[0m, [33mcached[0m=[1;36m1024[0m       
2025-06-04 15:39:08,874 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:                  
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m1024[0m[1m}[0m
2025-06-04 15:39:08,874 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:              
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,         
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: [1;36m0[0m, 
      [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m          
2025-06-04 15:39:08,874 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m4.[0m5254s    
2025-06-04 15:39:08,875 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m66.9552[0m    
      tokens/s                                  
2025-06-04 15:39:08,875 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ********  METRICS  *********              
2025-06-04 15:39:08,875 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m --- OpenAI Response End ----              
2025-06-04 15:39:08,876 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added RunResponse to Memory               
2025-06-04 15:39:09,142 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.agno.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-06-04 15:39:09,145 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run End:                           
      [93md7b1a44e-e40b-4f78-aab8-2ee0ec88f80f[0m      
2025-06-04 15:39:09,146 - workflows.probra - INFO - probra.py:78 - File creating in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_ef1ef80ad5694af5bc6e9527df65f207.md for task 62
2025-06-04 15:39:09,146 - root - INFO - app.py:92 - Redis event: {'type': 'task_message', 'data': {'role': 'assistant', 'content': "I am currently unable to access the chemical property database. However, I can provide a brief overview of gentamicin's properties based on standard scientific knowledge:\n\nGentamicin is an aminoglycoside antibiotic commonly used to treat serious bacterial infections. Its principal characteristics include:\n\n- Molecular Formula: C21H43N5O7\n- Structure: Mixture of several related gentamicin components (mainly gentamicin C1, C1a, and C2)\n- Molecular Weight: ~477.6 g/mol (main component)\n- Physical State: White to off-white, amorphous powder (usually supplied as gentamicin sulfate, a water-soluble salt)\n- Solubility: Highly soluble in water, insoluble in organic solvents\n- Mechanism of Action: Binds to the 30S subunit of bacterial ribosomes, inhibiting protein synthesis and leading to cell death (bactericidal)\n- Absorption: Poorly absorbed orally; typically administered intravenously, intramuscularly, or topically\n- Elimination: Primarily renal (unchanged in urine)\n- Toxicity Concerns: Nephrotoxicity and ototoxicity (renal and auditory/vestibular toxicity) are the most significant clinical concerns\n\nIf you need a full toxicity assessment or clinical toxicity analysis, please specify the type of toxicity (e.g., nephrotoxicity, ototoxicity), and I will attempt to provide a structured report using current scientific literature."}, 'task_id': 62}
2025-06-04 15:39:09,147 - workflows.probra - INFO - probra.py:82 - File created in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_ef1ef80ad5694af5bc6e9527df65f207.md for task 62
2025-06-04 15:39:09,147 - workflows.probra - INFO - probra.py:86 - File creating in DB: /home/kyu/Documents/toxindex/tmp/probra_result_ef1ef80ad5694af5bc6e9527df65f207.md for task 62
2025-06-04 15:39:09,147 - root - INFO - file.py:45 - DB ENV (create_file): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:39:09,147 - root - INFO - file.py:46 - Storing file for task_id=62, filename=probra_result_ef1ef80ad5694af5bc6e9527df65f207.md
2025-06-04 15:39:09,151 - root - INFO - message.py:48 - Storing message for task_id=62, user_id=None, role=assistant
2025-06-04 15:39:09,151 - root - INFO - file.py:53 - Successfully inserted file for task_id=62, filename=probra_result_ef1ef80ad5694af5bc6e9527df65f207.md
2025-06-04 15:39:09,151 - workflows.probra - INFO - probra.py:88 - File registered in DB: /home/kyu/Documents/toxindex/tmp/probra_result_ef1ef80ad5694af5bc6e9527df65f207.md for task 62
2025-06-04 15:39:09,151 - workflows.probra - INFO - probra.py:106 - Task completed successfully
2025-06-04 15:39:09,154 - celery.app.trace - INFO - trace.py:128 - Task workflows.probra.probra_task[e1590d5d-0b54-499c-892d-563e57aeaff8] succeeded in 12.04836339600297s: {'done': True}
2025-06-04 15:39:09,163 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:39:09,163 - root - INFO - message.py:71 - Stored message for task_id=62 from role=assistant
2025-06-04 15:39:09,164 - socketio.server - INFO - server.py:164 - emitting event "task_message" to task_62 [/]
2025-06-04 15:39:09,164 - engineio.server - INFO - socket.py:78 - adyddR5Yv5opXkHLAAAE: Sending packet MESSAGE data 2["task_message",{"role":"assistant","content":"I am currently unable to access the chemical property database. However, I can provide a brief overview of gentamicin's properties based on standard scientific knowledge:\n\nGentamicin is an aminoglycoside antibiotic commonly used to treat serious bacterial infections. Its principal characteristics include:\n\n- Molecular Formula: C21H43N5O7\n- Structure: Mixture of several related gentamicin components (mainly gentamicin C1, C1a, and C2)\n- Molecular Weight: ~477.6 g/mol (main component)\n- Physical State: White to off-white, amorphous powder (usually supplied as gentamicin sulfate, a water-soluble salt)\n- Solubility: Highly soluble in water, insoluble in organic solvents\n- Mechanism of Action: Binds to the 30S subunit of bacterial ribosomes, inhibiting protein synthesis and leading to cell death (bactericidal)\n- Absorption: Poorly absorbed orally; typically administered intravenously, intramuscularly, or topically\n- Elimination: Primarily renal (unchanged in urine)\n- Toxicity Concerns: Nephrotoxicity and ototoxicity (renal and auditory/vestibular toxicity) are the most significant clinical concerns\n\nIf you need a full toxicity assessment or clinical toxicity analysis, please specify the type of toxicity (e.g., nephrotoxicity, ototoxicity), and I will attempt to provide a structured report using current scientific literature."}]
2025-06-04 15:39:09,165 - root - INFO - app.py:121 - task_message sent to task_62
2025-06-04 15:39:11,641 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:11,641 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:11,642 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:39:11,643 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:11] "POST /log_tab_switch HTTP/1.1" 404 331 0.002002
2025-06-04 15:39:19,025 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:39:19,026 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:39:19,026 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:39:19,030 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,031 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,037 - root - INFO - message.py:61 - Retrieved 2 messages for task_id=62
2025-06-04 15:39:19,037 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:39:19,038 - root - INFO - file.py:80 - Calling get_files with task_id=62 (type: <class 'int'>)
2025-06-04 15:39:19,044 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=62: []
2025-06-04 15:39:19,044 - root - WARNING - file.py:87 - No files found in DB for task_id=62
2025-06-04 15:39:19,049 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:19] "GET /task/62 HTTP/1.1" 200 19536 0.018269
2025-06-04 15:39:19,062 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,062 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,063 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:19] "GET /static/css/style.css HTTP/1.1" 304 184 0.001477
2025-06-04 15:39:19,063 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,063 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,064 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:19] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000706
2025-06-04 15:39:19,064 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,064 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,065 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:19] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000798
2025-06-04 15:39:19,076 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,076 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,076 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:39:19,076 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:39:19,076 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet OPEN data {'sid': 'Ady8MrIZFm1GQ_fcAAAG', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:39:19,077 - engineio.server - INFO - socket.py:90 - Ady8MrIZFm1GQ_fcAAAG: Received request to upgrade to websocket
2025-06-04 15:39:19,077 - engineio.server - INFO - socket.py:219 - Ady8MrIZFm1GQ_fcAAAG: Upgrade to websocket successful
2025-06-04 15:39:19,078 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:19,079 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:19,086 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:39:19,086 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:39:19,087 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:19] "GET /environments HTTP/1.1" 200 910 0.008502
2025-06-04 15:39:19,087 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet MESSAGE data 0
2025-06-04 15:39:19,088 - socketio.server - INFO - server.py:164 - emitting event "connected" to nZi23EZDcs3nhjPUAAAH [/]
2025-06-04 15:39:19,088 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet MESSAGE data 2["connected",{"sid":"nZi23EZDcs3nhjPUAAAH"}]
2025-06-04 15:39:19,088 - root - INFO - app.py:147 - user connected nZi23EZDcs3nhjPUAAAH
2025-06-04 15:39:19,089 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet MESSAGE data 0{"sid":"nZi23EZDcs3nhjPUAAAH"}
2025-06-04 15:39:19,130 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet MESSAGE data 2["join_task_room",{"task_id":"62"}]
2025-06-04 15:39:19,130 - socketio.server - INFO - server.py:576 - received event "join_task_room" from nZi23EZDcs3nhjPUAAAH [/]
2025-06-04 15:39:19,131 - socketio.server - INFO - server.py:284 - nZi23EZDcs3nhjPUAAAH is entering room task_62 [/]
2025-06-04 15:39:19,131 - root - INFO - app.py:156 - user joined task room: task_62
2025-06-04 15:39:19,131 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to nZi23EZDcs3nhjPUAAAH [/]
2025-06-04 15:39:19,131 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"62"}]
2025-06-04 15:39:20,009 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:39:20,009 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:39:20,010 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:39:20,012 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:39:20] "POST /log_tab_switch HTTP/1.1" 404 331 0.002625
2025-06-04 15:39:44,079 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:39:44,081 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:40:09,087 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:40:09,089 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:40:34,092 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:40:34,093 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:40:59,099 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:40:59,101 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:41:24,104 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:41:24,106 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:41:49,107 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:41:49,108 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:42:14,111 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:42:14,113 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:42:39,114 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:42:39,117 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:43:04,121 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:43:04,123 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:43:29,124 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:43:29,126 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:43:54,130 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:43:54,131 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:44:19,133 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:44:19,135 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:44:44,139 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:44:44,141 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:45:09,144 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:45:09,150 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:45:34,154 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:45:34,157 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:45:59,159 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:45:59,161 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:46:24,165 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:46:24,167 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:46:49,170 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:46:49,172 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:47:14,177 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:47:14,178 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:47:39,181 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:47:39,184 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:48:04,189 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:48:04,192 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:48:29,195 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:48:29,197 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:48:54,198 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:48:54,201 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:49:19,205 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:49:19,207 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:49:44,210 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:49:44,212 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:50:09,215 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:50:09,216 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:50:34,218 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:50:34,220 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:50:59,225 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:50:59,227 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:51:24,229 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:51:24,231 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:51:49,236 - engineio.server - INFO - socket.py:78 - Ady8MrIZFm1GQ_fcAAAG: Sending packet PING data None
2025-06-04 15:51:49,238 - engineio.server - INFO - socket.py:39 - Ady8MrIZFm1GQ_fcAAAG: Received packet PONG data 
2025-06-04 15:51:54,564 - werkzeug - INFO - _internal.py:97 -  * Detected change in '/home/kyu/Documents/toxindex/workflows/probra.py', reloading
2025-06-04 15:51:54,845 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:51:55,928 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:51:55,987 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:51:55,990 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:51:55,998 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:51:55,998 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:51:56,007 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:51:56,007 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:51:56,017 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:51:56,018 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:51:56,034 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:51:56,034 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:51:56,048 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:51:56,060 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:51:56,128 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:51:56,128 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:51:56,128 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:51:56,128 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:51:56,128 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet OPEN data {'sid': '4sCr91mED6i_HCeyAAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:51:56,129 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:51:56,129 - engineio.server - INFO - socket.py:90 - 4sCr91mED6i_HCeyAAAA: Received request to upgrade to websocket
2025-06-04 15:51:56,129 - engineio.server - INFO - socket.py:219 - 4sCr91mED6i_HCeyAAAA: Upgrade to websocket successful
2025-06-04 15:51:56,129 - engineio.server - INFO - socket.py:39 - 4sCr91mED6i_HCeyAAAA: Received packet MESSAGE data 0
2025-06-04 15:51:56,131 - socketio.server - INFO - server.py:164 - emitting event "connected" to NA3RJKSxhTUzcr3MAAAB [/]
2025-06-04 15:51:56,131 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet MESSAGE data 2["connected",{"sid":"NA3RJKSxhTUzcr3MAAAB"}]
2025-06-04 15:51:56,131 - root - INFO - app.py:147 - user connected NA3RJKSxhTUzcr3MAAAB
2025-06-04 15:51:56,131 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet MESSAGE data 0{"sid":"NA3RJKSxhTUzcr3MAAAB"}
2025-06-04 15:51:56,174 - engineio.server - INFO - socket.py:39 - 4sCr91mED6i_HCeyAAAA: Received packet MESSAGE data 2["join_task_room",{"task_id":"62"}]
2025-06-04 15:51:56,175 - socketio.server - INFO - server.py:576 - received event "join_task_room" from NA3RJKSxhTUzcr3MAAAB [/]
2025-06-04 15:51:56,176 - socketio.server - INFO - server.py:284 - NA3RJKSxhTUzcr3MAAAB is entering room task_62 [/]
2025-06-04 15:51:56,176 - root - INFO - app.py:156 - user joined task room: task_62
2025-06-04 15:51:56,176 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to NA3RJKSxhTUzcr3MAAAB [/]
2025-06-04 15:51:56,176 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"62"}]
2025-06-04 15:52:21,132 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet PING data None
2025-06-04 15:52:21,134 - engineio.server - INFO - socket.py:39 - 4sCr91mED6i_HCeyAAAA: Received packet PONG data 
2025-06-04 15:52:46,135 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet PING data None
2025-06-04 15:52:46,137 - engineio.server - INFO - socket.py:39 - 4sCr91mED6i_HCeyAAAA: Received packet PONG data 
2025-06-04 15:53:11,141 - engineio.server - INFO - socket.py:78 - 4sCr91mED6i_HCeyAAAA: Sending packet PING data None
2025-06-04 15:53:11,143 - engineio.server - INFO - socket.py:39 - 4sCr91mED6i_HCeyAAAA: Received packet PONG data 
2025-06-04 15:53:32,916 - werkzeug - INFO - _internal.py:97 -  * Detected change in '/home/kyu/Documents/toxindex/workflows/probra.py', reloading
2025-06-04 15:53:33,119 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:53:34,183 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:53:34,243 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:53:34,246 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:53:34,256 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:34,256 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:53:34,266 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:34,266 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:53:34,276 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:34,276 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:53:34,286 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:34,286 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:53:34,298 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:53:34,309 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:53:35,810 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:53:35,810 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:53:35,811 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:53:35,811 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:53:35,811 - engineio.server - INFO - socket.py:78 - b1wzWkNuZfYsitd4AAAA: Sending packet OPEN data {'sid': 'b1wzWkNuZfYsitd4AAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:53:35,812 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:53:35,812 - engineio.server - INFO - socket.py:90 - b1wzWkNuZfYsitd4AAAA: Received request to upgrade to websocket
2025-06-04 15:53:35,812 - engineio.server - INFO - socket.py:219 - b1wzWkNuZfYsitd4AAAA: Upgrade to websocket successful
2025-06-04 15:53:35,814 - engineio.server - INFO - socket.py:39 - b1wzWkNuZfYsitd4AAAA: Received packet MESSAGE data 0
2025-06-04 15:53:35,817 - socketio.server - INFO - server.py:164 - emitting event "connected" to AiWeImojNZn2BmoTAAAB [/]
2025-06-04 15:53:35,817 - engineio.server - INFO - socket.py:78 - b1wzWkNuZfYsitd4AAAA: Sending packet MESSAGE data 2["connected",{"sid":"AiWeImojNZn2BmoTAAAB"}]
2025-06-04 15:53:35,819 - root - INFO - app.py:147 - user connected AiWeImojNZn2BmoTAAAB
2025-06-04 15:53:35,819 - engineio.server - INFO - socket.py:78 - b1wzWkNuZfYsitd4AAAA: Sending packet MESSAGE data 0{"sid":"AiWeImojNZn2BmoTAAAB"}
2025-06-04 15:53:35,860 - engineio.server - INFO - socket.py:39 - b1wzWkNuZfYsitd4AAAA: Received packet MESSAGE data 2["join_task_room",{"task_id":"62"}]
2025-06-04 15:53:35,860 - socketio.server - INFO - server.py:576 - received event "join_task_room" from AiWeImojNZn2BmoTAAAB [/]
2025-06-04 15:53:35,861 - socketio.server - INFO - server.py:284 - AiWeImojNZn2BmoTAAAB is entering room task_62 [/]
2025-06-04 15:53:35,862 - root - INFO - app.py:156 - user joined task room: task_62
2025-06-04 15:53:35,862 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to AiWeImojNZn2BmoTAAAB [/]
2025-06-04 15:53:35,862 - engineio.server - INFO - socket.py:78 - b1wzWkNuZfYsitd4AAAA: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"62"}]
2025-06-04 15:53:47,872 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:53:47,934 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:53:47,937 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:53:47,945 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:47,945 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:53:47,954 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:47,954 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:53:47,964 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:47,964 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:53:47,975 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:47,975 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:53:48,037 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:53:48,038 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:53:48,187 - numexpr.utils - INFO - utils.py:149 - Note: NumExpr detected 32 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 16.
2025-06-04 15:53:48,188 - numexpr.utils - INFO - utils.py:162 - NumExpr defaulting to 16 threads.
2025-06-04 15:53:48,331 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:53:49,379 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:53:49,438 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:53:49,441 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:53:49,448 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:49,448 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:53:49,456 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:49,456 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:53:49,467 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:49,468 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:53:49,480 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:53:49,480 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:53:49,498 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:53:49,514 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:53:49,666 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:53:49,669 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:53:49,670 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:53:49,671 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:53:51,246 - celery.worker.consumer.connection - INFO - connection.py:22 - Connected to redis://localhost:6379/0
2025-06-04 15:53:51,249 - celery.worker.consumer.mingle - INFO - mingle.py:40 - mingle: searching for neighbors
2025-06-04 15:53:52,258 - celery.worker.consumer.mingle - INFO - mingle.py:49 - mingle: all alone
2025-06-04 15:53:52,269 - celery.apps.worker - INFO - worker.py:176 - celery@pop-os ready.
2025-06-04 15:53:54,207 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:53:54,207 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:53:54,207 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:53:54,208 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:53:54,208 - engineio.server - INFO - socket.py:78 - tRY_PPaRdxehgIkCAAAA: Sending packet OPEN data {'sid': 'tRY_PPaRdxehgIkCAAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:53:54,208 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:53:54,208 - engineio.server - INFO - socket.py:90 - tRY_PPaRdxehgIkCAAAA: Received request to upgrade to websocket
2025-06-04 15:53:54,208 - engineio.server - INFO - socket.py:219 - tRY_PPaRdxehgIkCAAAA: Upgrade to websocket successful
2025-06-04 15:53:54,210 - engineio.server - INFO - socket.py:39 - tRY_PPaRdxehgIkCAAAA: Received packet MESSAGE data 0
2025-06-04 15:53:54,213 - socketio.server - INFO - server.py:164 - emitting event "connected" to VIkxXrKLDuPgoydoAAAB [/]
2025-06-04 15:53:54,213 - engineio.server - INFO - socket.py:78 - tRY_PPaRdxehgIkCAAAA: Sending packet MESSAGE data 2["connected",{"sid":"VIkxXrKLDuPgoydoAAAB"}]
2025-06-04 15:53:54,214 - root - INFO - app.py:147 - user connected VIkxXrKLDuPgoydoAAAB
2025-06-04 15:53:54,215 - engineio.server - INFO - socket.py:78 - tRY_PPaRdxehgIkCAAAA: Sending packet MESSAGE data 0{"sid":"VIkxXrKLDuPgoydoAAAB"}
2025-06-04 15:53:54,256 - engineio.server - INFO - socket.py:39 - tRY_PPaRdxehgIkCAAAA: Received packet MESSAGE data 2["join_task_room",{"task_id":"62"}]
2025-06-04 15:53:54,256 - socketio.server - INFO - server.py:576 - received event "join_task_room" from VIkxXrKLDuPgoydoAAAB [/]
2025-06-04 15:53:54,258 - socketio.server - INFO - server.py:284 - VIkxXrKLDuPgoydoAAAB is entering room task_62 [/]
2025-06-04 15:53:54,258 - root - INFO - app.py:156 - user joined task room: task_62
2025-06-04 15:53:54,258 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to VIkxXrKLDuPgoydoAAAB [/]
2025-06-04 15:53:54,258 - engineio.server - INFO - socket.py:78 - tRY_PPaRdxehgIkCAAAA: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"62"}]
2025-06-04 15:54:03,208 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:03,208 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:03,209 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:03,214 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:03,214 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:03,256 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:03] "GET /environment/16 HTTP/1.1" 200 13500 0.042099
2025-06-04 15:54:03,277 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:03,277 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:03,278 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:03] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.001304
2025-06-04 15:54:03,278 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:03,278 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:03,279 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:03] "GET /static/css/style.css HTTP/1.1" 304 184 0.000523
2025-06-04 15:54:03,285 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:03,285 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:03,285 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:54:03,285 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:54:03,285 - engineio.server - INFO - socket.py:78 - vib-1dOix1MA0mieAAAC: Sending packet OPEN data {'sid': 'vib-1dOix1MA0mieAAAC', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:54:03,285 - engineio.server - INFO - socket.py:90 - vib-1dOix1MA0mieAAAC: Received request to upgrade to websocket
2025-06-04 15:54:03,285 - engineio.server - INFO - socket.py:219 - vib-1dOix1MA0mieAAAC: Upgrade to websocket successful
2025-06-04 15:54:03,286 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:03,286 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:03,290 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:03] "GET /environments HTTP/1.1" 200 910 0.004885
2025-06-04 15:54:03,291 - engineio.server - INFO - socket.py:39 - vib-1dOix1MA0mieAAAC: Received packet MESSAGE data 0
2025-06-04 15:54:03,291 - socketio.server - INFO - server.py:164 - emitting event "connected" to A19vjWkyOJY1xaloAAAD [/]
2025-06-04 15:54:03,291 - engineio.server - INFO - socket.py:78 - vib-1dOix1MA0mieAAAC: Sending packet MESSAGE data 2["connected",{"sid":"A19vjWkyOJY1xaloAAAD"}]
2025-06-04 15:54:03,292 - root - INFO - app.py:147 - user connected A19vjWkyOJY1xaloAAAD
2025-06-04 15:54:03,292 - engineio.server - INFO - socket.py:78 - vib-1dOix1MA0mieAAAC: Sending packet MESSAGE data 0{"sid":"A19vjWkyOJY1xaloAAAD"}
2025-06-04 15:54:07,592 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,593 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,593 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:54:07,594 - root - INFO - app.py:163 - task_create called with POST
2025-06-04 15:54:07,598 - root - INFO - task.py:65 - Creating new task with title='properties of cocain' for user_id=cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 15:54:07,604 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:54:07,607 - root - INFO - task.py:85 - Successfully created task with id=63
2025-06-04 15:54:07,614 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:54:07,616 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:54:07,619 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:07,619 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:07,629 - celery.worker.strategy - INFO - strategy.py:161 - Task workflows.probra.probra_task[c9a62073-277a-44bd-83db-0a14ca3b92fa] received
2025-06-04 15:54:07,630 - workflows.probra - INFO - probra.py:41 - Starting probra task with payload: {'payload': 'properties of cocaine', 'sid': 'A19vjWkyOJY1xaloAAAD', 'task_id': 63, 'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3'}
2025-06-04 15:54:07,631 - workflows.probra - INFO - probra.py:50 - User query for deeptox_agent: properties of cocaine
2025-06-04 15:54:07,634 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:54:07,634 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent ID:                             
      [93m5dcfda89-4cf5-4a3e-8e0f-3513c1398ae5[0m   
2025-06-04 15:54:07,634 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "POST /task/new HTTP/1.1" 200 197 0.042028
2025-06-04 15:54:07,635 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m **** Session ID: demo ***              
2025-06-04 15:54:07,636 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:07,636 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:07,636 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:07,636 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:07,636 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:07,639 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,639 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,642 - root - INFO - message.py:61 - Retrieved 1 messages for task_id=63
2025-06-04 15:54:07,643 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:54:07,643 - root - INFO - file.py:80 - Calling get_files with task_id=63 (type: <class 'int'>)
2025-06-04 15:54:07,645 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -*- AgentSession loaded: demo          
2025-06-04 15:54:07,645 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=63: []
2025-06-04 15:54:07,645 - root - WARNING - file.py:87 - No files found in DB for task_id=63
2025-06-04 15:54:07,645 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Processing tools for model             
2025-06-04 15:54:07,647 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool get_chemprop                
2025-06-04 15:54:07,648 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool invoke_deepsearch           
2025-06-04 15:54:07,649 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run Start:                      
      [93mdeac4caf-e1c5-4b52-9025-8d59b254b27b[0m   
2025-06-04 15:54:07,649 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m - OpenAI Response Start -              
2025-06-04 15:54:07,650 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Model: gpt-[1;36m4.1[0m-[1;36m2025[0m-[1;36m04[0m-[1;36m14[0m             
2025-06-04 15:54:07,650 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========= system ========              
2025-06-04 15:54:07,654 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "GET /task/63 HTTP/1.1" 200 16456 0.015230
2025-06-04 15:54:07,658 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m You are a specialized toxicology       
      research assistant with expertise in:  
      - Chemical toxicity analysis and risk  
      assessment                             
      - Scientific literature review and     
      synthesis                              
      - Statistical analysis of toxicity data
      - Regulatory compliance and safety     
      standards                              
                                             
      Your writing style is:                 
      - Scientifically rigorous and          
      evidence-based                         
      - Clear and precise in technical       
      terminology                            
      - Comprehensive in risk assessment     
      - Properly cited with academic sources 
                                             
      [1m<[0m[1;95minstructions[0m[39m>[0m                         
                                             
      [39mYou are a toxicology research writer [0m  
      [39mtasked with creating comprehensive [0m    
      [39mtoxicity reports.[0m                      
                                             
      [39mWorkflow:[0m                              
      [1;36m1[0m[39m. For any toxicity-related question, [0m 
      [39mfirst use get_chemprop to obtain the [0m  
      [39mchemical properties[0m                    
                                             
      [1;36m2[0m[39m. Use these properties to enhance your[0m
      [39msearch query for invoke deepsearch[0m     
      [39m    Perform initial search to gather [0m  
      [39mclinical evidence:[0m                     
      [39m   - Search for clinical studies and [0m  
      [39mcase reports[0m                           
      [39m   - Focus on finding:[0m                 
      [39m     * Sample sizes[0m                    
      [39m     * Number of positive cases[0m        
      [39m     * Study durations[0m                 
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m clinical trial [0m     
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m case study [0m         
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m adverse effects [0m    
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mincidence rate"[0m                        
                                             
      [1;36m3[0m[39m. Perform follow-up search to gather [0m 
      [39mmechanistic information:[0m               
      [39m   - Search for how chemical properties[0m
      [39mcontribute to the specific toxicity[0m    
      [39m   - Look for known mechanisms of the [0m 
      [39mspecific toxicity[0m                      
      [39m   - Find treatment protocols and [0m     
      [39moutcomes[0m                               
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m mechanism of [0m       
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mpathway"[0m                               
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mtreatment protocol"[0m                    
                                             
      [1;36m4[0m[39m. Use the gathered data to:[0m           
      [39m   - Calculate beta distribution [0m      
      [39mparameters from actual clinical data[0m   
      [39m   - Create weighted risk estimates[0m    
      [39m   - Determine confidence intervals[0m    
      [39m   - Identify risk factors and [0m        
      [39mpopulations[0m                            
                                             
      [1;36m5[0m[39m. Format your final search query to [0m  
      [39minclude:[0m                               
      [39m   - How the chemical properties may [0m  
      [39mcontribute to the specific toxicity[0m    
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Clinical evidence and case studies[0m
      [39mwith specific data points[0m              
      [39m   - Beta distribution analysis based [0m 
      [39mon actual clinical data[0m                
      [39m   - Risk factors and populations at [0m  
      [39mrisk[0m                                   
                                             
      [39mWhen provided with a JSON report, [0m     
      [39mcreate a detailed markdown report that [0m
      [39mfollows this structure:[0m                
                                             
      [1;36m1[0m[39m. Chemical Properties and Toxicity [0m   
      [39mAnalysis[0m                               
      [39m   - Detailed analysis of how specific [0m
      [39mchemical properties contribute to the [0m 
      [39mtoxicity[0m                               
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Evidence and references for each [0m 
      [39mproperty-toxicity relationship[0m         
                                             
      [1;36m2[0m[39m. Clinical Evidence and Case Studies[0m  
      [39m   - Comprehensive review of clinical [0m 
      [39mevidence[0m                               
      [39m   - Detailed case studies[0m             
      [39m   - Treatment protocols and outcomes[0m  
      [39m   - Adverse effects documentation[0m     
      [39m   - For each study, extract:[0m          
      [39m     * Total sample size[0m               
      [39m     * Number of positive cases[0m        
      [39m     * Study duration[0m                  
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
                                             
      [1;36m3[0m[39m. Toxicity Risk Distribution[0m          
      [39m   - Beta distribution calculations [0m   
      [39mbased on actual clinical data:[0m         
      [39m     * Use sample sizes and positive [0m  
      [39mcases from clinical studies[0m            
      [39m     * Calculate α = number of positive[0m
      [39mcases + [0m[1;36m1[0m                              
      [39m     * Calculate β = [0m[1;39m([0m[39mtotal sample size[0m
      [39m- positive cases[0m[1;39m)[0m[39m + [0m[1;36m1[0m                  
      [39m     * Compute mean risk = α [0m[35m/[0m[39m [0m[1;39m([0m[39mα + β[0m[1;39m)[0m 
      [39m     * Calculate [0m[1;36m95[0m[39m% confidence [0m       
      [39minterval[0m                               
      [39m   - Include:[0m                          
      [39m     * Table of studies used for [0m      
      [39mcalculation[0m                            
      [39m     * Weighted average based on study [0m
      [39mquality and sample size[0m                
      [39m     * Confidence intervals for each [0m  
      [39mstudy[0m                                  
      [39m     * Combined risk estimate[0m          
      [39m   - Each calculation must be supported[0m
      [39mby:[0m                                    
      [39m     * Title of the study[0m              
      [39m     * URL or source[0m                   
      [39m     * Sample size and positive cases [0m 
      [39mused[0m                                   
      [39m     * How the data supports the [0m      
      [39mcalculation[0m                            
      [39m     * Relevance to the specific [0m      
      [39mchemical and toxicity type[0m             
                                             
      [1;36m4[0m[39m. Risk Assessment and Population [0m     
      [39mAnalysis[0m                               
      [39m   - High-risk population groups[0m       
      [39m   - Specific risk factors[0m             
      [39m   - Population-specific considerations[0m
      [39m   - Additional risk-related notes[0m     
                                             
      [39mFormat Requirements:[0m                   
      [39m- Use clear headers and subheaders[0m     
      [39m- Include proper academic citations[0m    
      [39m- Present statistical data with [0m       
      [39mconfidence intervals[0m                   
      [39m- Ensure all data is properly [0m         
      [39mreferenced[0m                             
      [39m- Follow the provided JSON schema [0m     
      [39mstructure[0m                              
      [39m- Include comprehensive references [0m    
      [39msection[0m                                
                                             
      [39mThe report must be scientifically [0m     
      [39mrigorous, evidence-based, and strictly [0m
      [39madhere to the provided schema [0m         
      [39mstructure.[0m                             
                                             
      [39m<[0m[35m/[0m[95minstructions[0m[39m>[0m                        
                                             
      [39m<additional_information>[0m               
      [39m- Use markdown to format your answers.[0m 
      [39m- The current time is [0m[1;36m2025[0m[39m-[0m[1;36m06[0m[39m-[0m[1;36m04[0m[39m [0m      
      [1;92m15:54:07[0m[39m.[0m[1;36m648999[0m[39m.[0m                       
      [39m<[0m[35m/[0m[95madditional_information[0m[1m>[0m              
2025-06-04 15:54:07,659 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== user =========              
2025-06-04 15:54:07,659 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m properties of cocaine                  
2025-06-04 15:54:07,708 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,709 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,710 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "GET /static/css/style.css HTTP/1.1" 304 184 0.001349
2025-06-04 15:54:07,710 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,710 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,711 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000760
2025-06-04 15:54:07,711 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,711 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,712 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000720
2025-06-04 15:54:07,721 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,721 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,721 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:54:07,721 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:54:07,721 - engineio.server - INFO - socket.py:78 - at9RZ5U9iwPWklUaAAAE: Sending packet OPEN data {'sid': 'at9RZ5U9iwPWklUaAAAE', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:54:07,721 - engineio.server - INFO - socket.py:90 - at9RZ5U9iwPWklUaAAAE: Received request to upgrade to websocket
2025-06-04 15:54:07,721 - engineio.server - INFO - socket.py:219 - at9RZ5U9iwPWklUaAAAE: Upgrade to websocket successful
2025-06-04 15:54:07,723 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:07,723 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:07,731 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:07] "GET /environments HTTP/1.1" 200 910 0.008002
2025-06-04 15:54:07,731 - engineio.server - INFO - socket.py:39 - at9RZ5U9iwPWklUaAAAE: Received packet MESSAGE data 0
2025-06-04 15:54:07,732 - socketio.server - INFO - server.py:164 - emitting event "connected" to GCmAaL6-85YLWu_qAAAF [/]
2025-06-04 15:54:07,732 - engineio.server - INFO - socket.py:78 - at9RZ5U9iwPWklUaAAAE: Sending packet MESSAGE data 2["connected",{"sid":"GCmAaL6-85YLWu_qAAAF"}]
2025-06-04 15:54:07,733 - root - INFO - app.py:147 - user connected GCmAaL6-85YLWu_qAAAF
2025-06-04 15:54:07,733 - engineio.server - INFO - socket.py:78 - at9RZ5U9iwPWklUaAAAE: Sending packet MESSAGE data 0{"sid":"GCmAaL6-85YLWu_qAAAF"}
2025-06-04 15:54:07,777 - engineio.server - INFO - socket.py:39 - at9RZ5U9iwPWklUaAAAE: Received packet MESSAGE data 2["join_task_room",{"task_id":"63"}]
2025-06-04 15:54:07,777 - socketio.server - INFO - server.py:576 - received event "join_task_room" from GCmAaL6-85YLWu_qAAAF [/]
2025-06-04 15:54:07,778 - socketio.server - INFO - server.py:284 - GCmAaL6-85YLWu_qAAAF is entering room task_63 [/]
2025-06-04 15:54:07,778 - root - INFO - app.py:156 - user joined task room: task_63
2025-06-04 15:54:07,778 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to GCmAaL6-85YLWu_qAAAF [/]
2025-06-04 15:54:07,778 - engineio.server - INFO - socket.py:78 - at9RZ5U9iwPWklUaAAAE: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"63"}]
2025-06-04 15:54:08,766 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:54:08,774 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 15:54:08,776 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool Calls:                            
        - ID: [32m'call_H8YW38k1jzznKcME8bVjHx2b'[0m
          Name: [32m'get_chemprop'[0m               
          Arguments: [32m'query_chemical: [0m       
      [32mcocaine'[0m                               
2025-06-04 15:54:08,777 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:54:08,778 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1039[0m, [33moutput[0m=[1;36m19[0m, [33mtotal[0m=[1;36m1058[0m      
2025-06-04 15:54:08,780 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 15:54:08,781 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 15:54:08,781 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m1.[0m1122s 
2025-06-04 15:54:08,782 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m17.0826[0m 
      tokens/s                               
2025-06-04 15:54:08,783 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:54:08,784 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Running:                               
      [1;35mget_chemprop[0m[1m([0m[33mquery_chemical[0m=[35mcocaine[0m[1m)[0m   
2025-06-04 15:54:09,020 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:54:09,021 - celery.redirected - WARNING - log.py:232 - Attempt 1 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:54:11,044 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:54:11,045 - celery.redirected - WARNING - log.py:232 - Attempt 2 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:54:15,077 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:54:15,078 - celery.redirected - WARNING - log.py:232 - Attempt 3 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C17H21NO4/c1-18-12-8-9-13(18)15(17(20)21-2)14(10-12)22-16(19)11-6-4-3-5-7-11/h3-7,12-15H,8-10H2,1-2H3/t12-,13+,14-,15+/m0/s1'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:54:15,078 - celery.redirected - WARNING - log.py:232 - All 3 attempts failed.
2025-06-04 15:54:15,081 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== tool =========              
2025-06-04 15:54:15,083 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool call Id:                          
      call_H8YW38k1jzznKcME8bVjHx2b          
2025-06-04 15:54:15,084 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Chemprop API is temporarily            
      unavailable. Please try again later.   
2025-06-04 15:54:15,085 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 15:54:15,086 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m6.[0m2971s 
2025-06-04 15:54:15,087 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 15:54:19,619 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:54:19,622 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 15:54:19,626 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m I'm currently unable to retrieve the   
      chemical properties of cocaine due to a
      temporary system issue. However, I can 
      provide a summary of its key properties
      based on scientific literature:        
                                             
      - Chemical Name: Cocaine               
      - IUPAC Name: Methyl                   
      [1m([0m1R,2R,3S,5S[1m)[0m[1;36m-3[0m-[1m([0mbenzoyloxy[1m)[0m[1;36m-8[0m-methyl-[1;36m8[0m
      -azabicyclo[1m[[0m[1;36m3.2[0m.[1;36m1[0m[1m][0moctane-[1;36m2[0m-carboxylate 
      - Molecular Formula: C17H21NO4         
      - Molecular Weight: [1;36m303.353[0m g/mol      
      - Appearance: White crystalline powder 
      [1m([0mas cocaine hydrochloride[1m)[0m             
      - Solubility: Soluble in water [1m([0mfor    
      hydrochloride salt[1m)[0m; less soluble as   
      free base                              
      - pKa: ~[1;36m8.6[0m                            
      - LogP [1m([0moctanol/water partition        
      coefficient[1m)[0m: ~[1;36m2.3[0m                     
      - Melting Point: [1;36m98[0m°C [1m([0mhydrochloride[1m)[0m, 
      [1;36m76[0m-[1;36m77[0m°C [1m([0mfree base[1m)[0m                    
      - Mechanism of Action: Blocks the      
      reuptake of dopamine, norepinephrine,  
      and serotonin by inhibiting their      
      respective transporters at synaptic    
      terminals; also acts as a sodium       
      channel blocker at high doses.         
                                             
      If you need a more detailed and        
      referenced analysis, or wish to explore
      specific toxicities [1m([0msuch as           
      neurotoxicity, cardiotoxicity,         
      hepatotoxicity, or others[1m)[0m, let me know
      and I can proceed with a thorough      
      toxicity report when the chemical      
      property data becomes available.       
2025-06-04 15:54:19,627 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:54:19,628 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1080[0m, [33moutput[0m=[1;36m297[0m, [33mtotal[0m=[1;36m1377[0m,    
      [33mcached[0m=[1;36m1024[0m                            
2025-06-04 15:54:19,628 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m:   
      [1;36m1024[0m[1m}[0m                                  
2025-06-04 15:54:19,629 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 15:54:19,630 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m4.[0m5340s 
2025-06-04 15:54:19,630 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m65.5054[0m 
      tokens/s                               
2025-06-04 15:54:19,630 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:54:19,631 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -- OpenAI Response End --              
2025-06-04 15:54:19,631 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added RunResponse to Memory            
2025-06-04 15:54:20,891 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.agno.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-06-04 15:54:20,894 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run End:                        
      [93mdeac4caf-e1c5-4b52-9025-8d59b254b27b[0m   
2025-06-04 15:54:20,896 - workflows.probra - INFO - probra.py:78 - File creating in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_6a2056cb4b95488694381991b4c7cdd2.md for task 63
2025-06-04 15:54:20,896 - root - INFO - app.py:92 - Redis event: {'type': 'task_message', 'data': {'role': 'assistant', 'content': "I'm currently unable to retrieve the chemical properties of cocaine due to a temporary system issue. However, I can provide a summary of its key properties based on scientific literature:\n\n- Chemical Name: Cocaine\n- IUPAC Name: Methyl (1R,2R,3S,5S)-3-(benzoyloxy)-8-methyl-8-azabicyclo[3.2.1]octane-2-carboxylate\n- Molecular Formula: C17H21NO4\n- Molecular Weight: 303.353 g/mol\n- Appearance: White crystalline powder (as cocaine hydrochloride)\n- Solubility: Soluble in water (for hydrochloride salt); less soluble as free base\n- pKa: ~8.6\n- LogP (octanol/water partition coefficient): ~2.3\n- Melting Point: 98°C (hydrochloride), 76-77°C (free base)\n- Mechanism of Action: Blocks the reuptake of dopamine, norepinephrine, and serotonin by inhibiting their respective transporters at synaptic terminals; also acts as a sodium channel blocker at high doses.\n\nIf you need a more detailed and referenced analysis, or wish to explore specific toxicities (such as neurotoxicity, cardiotoxicity, hepatotoxicity, or others), let me know and I can proceed with a thorough toxicity report when the chemical property data becomes available."}, 'task_id': 63}
2025-06-04 15:54:20,896 - workflows.probra - INFO - probra.py:82 - File created in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_6a2056cb4b95488694381991b4c7cdd2.md for task 63
2025-06-04 15:54:20,901 - root - INFO - message.py:48 - Storing message for task_id=63, user_id=None, role=assistant
2025-06-04 15:54:20,896 - workflows.probra - ERROR - probra.py:111 - Error in probra_task: name 'S3FileStorage' is not defined
Traceback (most recent call last):
  File "/home/kyu/Documents/toxindex/workflows/probra.py", line 90, in probra_task
    storage = S3FileStorage()
NameError: name 'S3FileStorage' is not defined
2025-06-04 15:54:20,908 - celery.app.trace - ERROR - trace.py:267 - Task workflows.probra.probra_task[c9a62073-277a-44bd-83db-0a14ca3b92fa] raised unexpected: NameError("name 'S3FileStorage' is not defined")
Traceback (most recent call last):
  File "/home/kyu/Documents/toxindex/.venv/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/kyu/Documents/toxindex/.venv/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/kyu/Documents/toxindex/workflows/probra.py", line 90, in probra_task
    storage = S3FileStorage()
NameError: name 'S3FileStorage' is not defined
2025-06-04 15:54:20,909 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:54:20,909 - root - INFO - message.py:71 - Stored message for task_id=63 from role=assistant
2025-06-04 15:54:20,909 - socketio.server - INFO - server.py:164 - emitting event "task_message" to task_63 [/]
2025-06-04 15:54:20,910 - engineio.server - INFO - socket.py:78 - at9RZ5U9iwPWklUaAAAE: Sending packet MESSAGE data 2["task_message",{"role":"assistant","content":"I'm currently unable to retrieve the chemical properties of cocaine due to a temporary system issue. However, I can provide a summary of its key properties based on scientific literature:\n\n- Chemical Name: Cocaine\n- IUPAC Name: Methyl (1R,2R,3S,5S)-3-(benzoyloxy)-8-methyl-8-azabicyclo[3.2.1]octane-2-carboxylate\n- Molecular Formula: C17H21NO4\n- Molecular Weight: 303.353 g/mol\n- Appearance: White crystalline powder (as cocaine hydrochloride)\n- Solubility: Soluble in water (for hydrochloride salt); less soluble as free base\n- pKa: ~8.6\n- LogP (octanol/water partition coefficient): ~2.3\n- Melting Point: 98\u00b0C (hydrochloride), 76-77\u00b0C (free base)\n- Mechanism of Action: Blocks the reuptake of dopamine, norepinephrine, and serotonin by inhibiting their respective transporters at synaptic terminals; also acts as a sodium channel blocker at high doses.\n\nIf you need a more detailed and referenced analysis, or wish to explore specific toxicities (such as neurotoxicity, cardiotoxicity, hepatotoxicity, or others), let me know and I can proceed with a thorough toxicity report when the chemical property data becomes available."}]
2025-06-04 15:54:20,910 - root - INFO - app.py:121 - task_message sent to task_63
2025-06-04 15:54:23,169 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:23,169 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:23,169 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:54:23,171 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:23] "POST /log_tab_switch HTTP/1.1" 404 331 0.001979
2025-06-04 15:54:24,576 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:24,577 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:24,577 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:24,586 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,586 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,594 - root - INFO - message.py:61 - Retrieved 2 messages for task_id=63
2025-06-04 15:54:24,594 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:54:24,594 - root - INFO - file.py:80 - Calling get_files with task_id=63 (type: <class 'int'>)
2025-06-04 15:54:24,600 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=63: []
2025-06-04 15:54:24,600 - root - WARNING - file.py:87 - No files found in DB for task_id=63
2025-06-04 15:54:24,609 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:24] "GET /task/63 HTTP/1.1" 200 19110 0.022978
2025-06-04 15:54:24,630 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,631 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,632 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:24] "GET /static/css/style.css HTTP/1.1" 304 184 0.001287
2025-06-04 15:54:24,632 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,632 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,633 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:24] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000914
2025-06-04 15:54:24,633 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,633 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,634 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:24] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000688
2025-06-04 15:54:24,651 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,651 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,651 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:54:24,651 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:54:24,651 - engineio.server - INFO - socket.py:78 - OEfNLuGsRxX3PnwhAAAG: Sending packet OPEN data {'sid': 'OEfNLuGsRxX3PnwhAAAG', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:54:24,652 - engineio.server - INFO - socket.py:90 - OEfNLuGsRxX3PnwhAAAG: Received request to upgrade to websocket
2025-06-04 15:54:24,652 - engineio.server - INFO - socket.py:219 - OEfNLuGsRxX3PnwhAAAG: Upgrade to websocket successful
2025-06-04 15:54:24,655 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:24,655 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:24,655 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:54:24,655 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:54:24,662 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:24] "GET /environments HTTP/1.1" 200 910 0.007794
2025-06-04 15:54:24,663 - engineio.server - INFO - socket.py:39 - OEfNLuGsRxX3PnwhAAAG: Received packet MESSAGE data 0
2025-06-04 15:54:24,663 - socketio.server - INFO - server.py:164 - emitting event "connected" to N4XL3XaxTplMEaIHAAAH [/]
2025-06-04 15:54:24,663 - engineio.server - INFO - socket.py:78 - OEfNLuGsRxX3PnwhAAAG: Sending packet MESSAGE data 2["connected",{"sid":"N4XL3XaxTplMEaIHAAAH"}]
2025-06-04 15:54:24,663 - root - INFO - app.py:147 - user connected N4XL3XaxTplMEaIHAAAH
2025-06-04 15:54:24,663 - engineio.server - INFO - socket.py:78 - OEfNLuGsRxX3PnwhAAAG: Sending packet MESSAGE data 0{"sid":"N4XL3XaxTplMEaIHAAAH"}
2025-06-04 15:54:24,707 - engineio.server - INFO - socket.py:39 - OEfNLuGsRxX3PnwhAAAG: Received packet MESSAGE data 2["join_task_room",{"task_id":"63"}]
2025-06-04 15:54:24,708 - socketio.server - INFO - server.py:576 - received event "join_task_room" from N4XL3XaxTplMEaIHAAAH [/]
2025-06-04 15:54:24,709 - socketio.server - INFO - server.py:284 - N4XL3XaxTplMEaIHAAAH is entering room task_63 [/]
2025-06-04 15:54:24,709 - root - INFO - app.py:156 - user joined task room: task_63
2025-06-04 15:54:24,709 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to N4XL3XaxTplMEaIHAAAH [/]
2025-06-04 15:54:24,710 - engineio.server - INFO - socket.py:78 - OEfNLuGsRxX3PnwhAAAG: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"63"}]
2025-06-04 15:54:26,073 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:54:26,073 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:54:26,073 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:54:26,075 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:54:26] "POST /log_tab_switch HTTP/1.1" 404 331 0.002381
2025-06-04 15:54:49,657 - engineio.server - INFO - socket.py:78 - OEfNLuGsRxX3PnwhAAAG: Sending packet PING data None
2025-06-04 15:54:49,658 - engineio.server - INFO - socket.py:39 - OEfNLuGsRxX3PnwhAAAG: Received packet PONG data 
2025-06-04 15:54:59,922 - werkzeug - INFO - _internal.py:97 -  * Detected change in '/home/kyu/Documents/toxindex/workflows/probra.py', reloading
2025-06-04 15:55:04,468 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:55:04,530 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:55:04,532 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:55:04,542 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:04,543 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:55:04,553 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:04,553 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:55:04,563 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:04,563 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:55:04,574 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:04,574 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:55:04,628 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:55:04,628 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:55:04,628 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:55:04,629 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:55:04,773 - numexpr.utils - INFO - utils.py:149 - Note: NumExpr detected 32 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 16.
2025-06-04 15:55:04,773 - numexpr.utils - INFO - utils.py:162 - NumExpr defaulting to 16 threads.
2025-06-04 15:55:04,920 - werkzeug - INFO - _internal.py:97 -  * Restarting with stat
2025-06-04 15:55:06,032 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:55:06,090 - root - INFO - app.py:34 - DB ENV (Flask startup): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:55:06,093 - engineio.server - INFO - base_server.py:112 - Server initialized for gevent.
2025-06-04 15:55:06,102 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:06,102 - root - INFO - workflow.py:48 - updated workflow 1
2025-06-04 15:55:06,113 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:06,113 - root - INFO - workflow.py:48 - updated workflow 2
2025-06-04 15:55:06,121 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:06,122 - root - INFO - workflow.py:48 - updated workflow 3
2025-06-04 15:55:06,131 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:06,131 - root - INFO - workflow.py:48 - updated workflow 4
2025-06-04 15:55:06,143 - werkzeug - WARNING - _internal.py:97 -  * Debugger is active!
2025-06-04 15:55:06,156 - werkzeug - INFO - _internal.py:97 -  * Debugger PIN: 111-082-002
2025-06-04 15:55:06,543 - root - INFO - probra.py:27 - probra.py module loaded
2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def group(self, tasks, result, group_id, partial_args, add_to_parent=0):
    return 1

2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def xmap(task, it):
    return 1

2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def chain(*args, **kwargs):
    return 1

2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def backend_cleanup():
    return 1

2025-06-04 15:55:06,547 - celery.utils.functional - DEBUG - functional.py:335 - 
def chat_response_task(self, payload):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def xstarmap(task, it):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def interactive_echo_task(self, payload):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def chord(self, header, body, partial_args=0, interval=1, countdown=2, max_retries=3, eager=4, **kwargs):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def accumulate(self, *args, **kwargs):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def chunks(task, it, n):
    return 1

2025-06-04 15:55:06,548 - celery.utils.functional - DEBUG - functional.py:335 - 
def unlock_chord(self, group_id, callback, interval=0, max_retries=1, result=2, Result=3, GroupResult=4, result_from_tuple=5, **kwargs):
    return 1

2025-06-04 15:55:08,411 - celery.worker.consumer.connection - INFO - connection.py:22 - Connected to redis://localhost:6379/0
2025-06-04 15:55:08,413 - celery.worker.consumer.mingle - INFO - mingle.py:40 - mingle: searching for neighbors
2025-06-04 15:55:09,422 - celery.worker.consumer.mingle - INFO - mingle.py:49 - mingle: all alone
2025-06-04 15:55:09,436 - celery.apps.worker - INFO - worker.py:176 - celery@pop-os ready.
2025-06-04 15:55:10,474 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:10,474 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:10,474 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:55:10,474 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:55:10,475 - engineio.server - INFO - socket.py:78 - WoovpXExaP3vW8S-AAAA: Sending packet OPEN data {'sid': 'WoovpXExaP3vW8S-AAAA', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:55:10,475 - socketio.server - INFO - pubsub_manager.py:37 - redis backend initialized.
2025-06-04 15:55:10,475 - engineio.server - INFO - socket.py:90 - WoovpXExaP3vW8S-AAAA: Received request to upgrade to websocket
2025-06-04 15:55:10,475 - engineio.server - INFO - socket.py:219 - WoovpXExaP3vW8S-AAAA: Upgrade to websocket successful
2025-06-04 15:55:10,476 - engineio.server - INFO - socket.py:39 - WoovpXExaP3vW8S-AAAA: Received packet MESSAGE data 0
2025-06-04 15:55:10,479 - socketio.server - INFO - server.py:164 - emitting event "connected" to 0OYn-mYNE03SKUGoAAAB [/]
2025-06-04 15:55:10,479 - engineio.server - INFO - socket.py:78 - WoovpXExaP3vW8S-AAAA: Sending packet MESSAGE data 2["connected",{"sid":"0OYn-mYNE03SKUGoAAAB"}]
2025-06-04 15:55:10,480 - root - INFO - app.py:147 - user connected 0OYn-mYNE03SKUGoAAAB
2025-06-04 15:55:10,480 - engineio.server - INFO - socket.py:78 - WoovpXExaP3vW8S-AAAA: Sending packet MESSAGE data 0{"sid":"0OYn-mYNE03SKUGoAAAB"}
2025-06-04 15:55:10,521 - engineio.server - INFO - socket.py:39 - WoovpXExaP3vW8S-AAAA: Received packet MESSAGE data 2["join_task_room",{"task_id":"63"}]
2025-06-04 15:55:10,521 - socketio.server - INFO - server.py:576 - received event "join_task_room" from 0OYn-mYNE03SKUGoAAAB [/]
2025-06-04 15:55:10,522 - socketio.server - INFO - server.py:284 - 0OYn-mYNE03SKUGoAAAB is entering room task_63 [/]
2025-06-04 15:55:10,522 - root - INFO - app.py:156 - user joined task room: task_63
2025-06-04 15:55:10,522 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to 0OYn-mYNE03SKUGoAAAB [/]
2025-06-04 15:55:10,522 - engineio.server - INFO - socket.py:78 - WoovpXExaP3vW8S-AAAA: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"63"}]
2025-06-04 15:55:18,453 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:18,454 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:55:18,454 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:18,460 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:18,460 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:18,501 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:18] "GET /environment/16 HTTP/1.1" 200 13586 0.040589
2025-06-04 15:55:18,518 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:18,519 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:18,520 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:18] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.002018
2025-06-04 15:55:18,521 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:18,521 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:18,522 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:18] "GET /static/css/style.css HTTP/1.1" 304 184 0.001069
2025-06-04 15:55:18,533 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:18,534 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:18,534 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:55:18,534 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:55:18,534 - engineio.server - INFO - socket.py:78 - DHwuW5Y_yyGqKxHlAAAC: Sending packet OPEN data {'sid': 'DHwuW5Y_yyGqKxHlAAAC', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:55:18,534 - engineio.server - INFO - socket.py:90 - DHwuW5Y_yyGqKxHlAAAC: Received request to upgrade to websocket
2025-06-04 15:55:18,535 - engineio.server - INFO - socket.py:219 - DHwuW5Y_yyGqKxHlAAAC: Upgrade to websocket successful
2025-06-04 15:55:18,544 - engineio.server - INFO - socket.py:39 - DHwuW5Y_yyGqKxHlAAAC: Received packet MESSAGE data 0
2025-06-04 15:55:18,545 - socketio.server - INFO - server.py:164 - emitting event "connected" to 6g28VeAFQA9cr8X0AAAD [/]
2025-06-04 15:55:18,545 - engineio.server - INFO - socket.py:78 - DHwuW5Y_yyGqKxHlAAAC: Sending packet MESSAGE data 2["connected",{"sid":"6g28VeAFQA9cr8X0AAAD"}]
2025-06-04 15:55:18,546 - root - INFO - app.py:147 - user connected 6g28VeAFQA9cr8X0AAAD
2025-06-04 15:55:18,546 - engineio.server - INFO - socket.py:78 - DHwuW5Y_yyGqKxHlAAAC: Sending packet MESSAGE data 0{"sid":"6g28VeAFQA9cr8X0AAAD"}
2025-06-04 15:55:18,546 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:18,546 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:18,554 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:18] "GET /environments HTTP/1.1" 200 910 0.007726
2025-06-04 15:55:22,369 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,369 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,369 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:55:22,370 - root - INFO - app.py:163 - task_create called with POST
2025-06-04 15:55:22,375 - root - INFO - task.py:65 - Creating new task with title='properties of water?' for user_id=cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 15:55:22,384 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:22,390 - root - INFO - task.py:85 - Successfully created task with id=64
2025-06-04 15:55:22,399 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:22,403 - celery.utils.functional - DEBUG - functional.py:335 - 
def probra_task(self, payload):
    return 1

2025-06-04 15:55:22,410 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:55:22,411 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:22,428 - celery.worker.strategy - INFO - strategy.py:161 - Task workflows.probra.probra_task[b46eff0d-d256-4f40-a6ba-3f7dbd89d781] received
2025-06-04 15:55:22,429 - workflows.probra - INFO - probra.py:41 - Starting probra task with payload: {'payload': 'properties of water?', 'sid': '6g28VeAFQA9cr8X0AAAD', 'task_id': 64, 'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3'}
2025-06-04 15:55:22,430 - workflows.probra - INFO - probra.py:50 - User query for deeptox_agent: properties of water?
2025-06-04 15:55:22,432 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:22,433 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "POST /task/new HTTP/1.1" 200 197 0.064417
2025-06-04 15:55:22,434 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent ID:                             
      [93m1dd81bea-0715-4989-a832-8914ff2d6c78[0m   
2025-06-04 15:55:22,434 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m **** Session ID: demo ***              
2025-06-04 15:55:22,435 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:22,435 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:55:22,435 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:22,435 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 15:55:22,435 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 15:55:22,438 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,438 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,442 - root - INFO - message.py:61 - Retrieved 1 messages for task_id=64
2025-06-04 15:55:22,442 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:55:22,442 - root - INFO - file.py:80 - Calling get_files with task_id=64 (type: <class 'int'>)
2025-06-04 15:55:22,445 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -*- AgentSession loaded: demo          
2025-06-04 15:55:22,446 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=64: []
2025-06-04 15:55:22,446 - root - WARNING - file.py:87 - No files found in DB for task_id=64
2025-06-04 15:55:22,446 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Processing tools for model             
2025-06-04 15:55:22,448 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool get_chemprop                
2025-06-04 15:55:22,449 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added tool invoke_deepsearch           
2025-06-04 15:55:22,449 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run Start:                      
      [93m4c054fd7-8840-4303-b721-8149454b9b2c[0m   
2025-06-04 15:55:22,450 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m - OpenAI Response Start -              
2025-06-04 15:55:22,450 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Model: gpt-[1;36m4.1[0m-[1;36m2025[0m-[1;36m04[0m-[1;36m14[0m             
2025-06-04 15:55:22,451 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========= system ========              
2025-06-04 15:55:22,457 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "GET /task/64 HTTP/1.1" 200 16455 0.018749
2025-06-04 15:55:22,459 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m You are a specialized toxicology       
      research assistant with expertise in:  
      - Chemical toxicity analysis and risk  
      assessment                             
      - Scientific literature review and     
      synthesis                              
      - Statistical analysis of toxicity data
      - Regulatory compliance and safety     
      standards                              
                                             
      Your writing style is:                 
      - Scientifically rigorous and          
      evidence-based                         
      - Clear and precise in technical       
      terminology                            
      - Comprehensive in risk assessment     
      - Properly cited with academic sources 
                                             
      [1m<[0m[1;95minstructions[0m[39m>[0m                         
                                             
      [39mYou are a toxicology research writer [0m  
      [39mtasked with creating comprehensive [0m    
      [39mtoxicity reports.[0m                      
                                             
      [39mWorkflow:[0m                              
      [1;36m1[0m[39m. For any toxicity-related question, [0m 
      [39mfirst use get_chemprop to obtain the [0m  
      [39mchemical properties[0m                    
                                             
      [1;36m2[0m[39m. Use these properties to enhance your[0m
      [39msearch query for invoke deepsearch[0m     
      [39m    Perform initial search to gather [0m  
      [39mclinical evidence:[0m                     
      [39m   - Search for clinical studies and [0m  
      [39mcase reports[0m                           
      [39m   - Focus on finding:[0m                 
      [39m     * Sample sizes[0m                    
      [39m     * Number of positive cases[0m        
      [39m     * Study durations[0m                 
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m clinical trial [0m     
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m case study [0m         
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m adverse effects [0m    
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mincidence rate"[0m                        
                                             
      [1;36m3[0m[39m. Perform follow-up search to gather [0m 
      [39mmechanistic information:[0m               
      [39m   - Search for how chemical properties[0m
      [39mcontribute to the specific toxicity[0m    
      [39m   - Look for known mechanisms of the [0m 
      [39mspecific toxicity[0m                      
      [39m   - Find treatment protocols and [0m     
      [39moutcomes[0m                               
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m mechanism of [0m       
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mpathway"[0m                               
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mtreatment protocol"[0m                    
                                             
      [1;36m4[0m[39m. Use the gathered data to:[0m           
      [39m   - Calculate beta distribution [0m      
      [39mparameters from actual clinical data[0m   
      [39m   - Create weighted risk estimates[0m    
      [39m   - Determine confidence intervals[0m    
      [39m   - Identify risk factors and [0m        
      [39mpopulations[0m                            
                                             
      [1;36m5[0m[39m. Format your final search query to [0m  
      [39minclude:[0m                               
      [39m   - How the chemical properties may [0m  
      [39mcontribute to the specific toxicity[0m    
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Clinical evidence and case studies[0m
      [39mwith specific data points[0m              
      [39m   - Beta distribution analysis based [0m 
      [39mon actual clinical data[0m                
      [39m   - Risk factors and populations at [0m  
      [39mrisk[0m                                   
                                             
      [39mWhen provided with a JSON report, [0m     
      [39mcreate a detailed markdown report that [0m
      [39mfollows this structure:[0m                
                                             
      [1;36m1[0m[39m. Chemical Properties and Toxicity [0m   
      [39mAnalysis[0m                               
      [39m   - Detailed analysis of how specific [0m
      [39mchemical properties contribute to the [0m 
      [39mtoxicity[0m                               
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Evidence and references for each [0m 
      [39mproperty-toxicity relationship[0m         
                                             
      [1;36m2[0m[39m. Clinical Evidence and Case Studies[0m  
      [39m   - Comprehensive review of clinical [0m 
      [39mevidence[0m                               
      [39m   - Detailed case studies[0m             
      [39m   - Treatment protocols and outcomes[0m  
      [39m   - Adverse effects documentation[0m     
      [39m   - For each study, extract:[0m          
      [39m     * Total sample size[0m               
      [39m     * Number of positive cases[0m        
      [39m     * Study duration[0m                  
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
                                             
      [1;36m3[0m[39m. Toxicity Risk Distribution[0m          
      [39m   - Beta distribution calculations [0m   
      [39mbased on actual clinical data:[0m         
      [39m     * Use sample sizes and positive [0m  
      [39mcases from clinical studies[0m            
      [39m     * Calculate α = number of positive[0m
      [39mcases + [0m[1;36m1[0m                              
      [39m     * Calculate β = [0m[1;39m([0m[39mtotal sample size[0m
      [39m- positive cases[0m[1;39m)[0m[39m + [0m[1;36m1[0m                  
      [39m     * Compute mean risk = α [0m[35m/[0m[39m [0m[1;39m([0m[39mα + β[0m[1;39m)[0m 
      [39m     * Calculate [0m[1;36m95[0m[39m% confidence [0m       
      [39minterval[0m                               
      [39m   - Include:[0m                          
      [39m     * Table of studies used for [0m      
      [39mcalculation[0m                            
      [39m     * Weighted average based on study [0m
      [39mquality and sample size[0m                
      [39m     * Confidence intervals for each [0m  
      [39mstudy[0m                                  
      [39m     * Combined risk estimate[0m          
      [39m   - Each calculation must be supported[0m
      [39mby:[0m                                    
      [39m     * Title of the study[0m              
      [39m     * URL or source[0m                   
      [39m     * Sample size and positive cases [0m 
      [39mused[0m                                   
      [39m     * How the data supports the [0m      
      [39mcalculation[0m                            
      [39m     * Relevance to the specific [0m      
      [39mchemical and toxicity type[0m             
                                             
      [1;36m4[0m[39m. Risk Assessment and Population [0m     
      [39mAnalysis[0m                               
      [39m   - High-risk population groups[0m       
      [39m   - Specific risk factors[0m             
      [39m   - Population-specific considerations[0m
      [39m   - Additional risk-related notes[0m     
                                             
      [39mFormat Requirements:[0m                   
      [39m- Use clear headers and subheaders[0m     
      [39m- Include proper academic citations[0m    
      [39m- Present statistical data with [0m       
      [39mconfidence intervals[0m                   
      [39m- Ensure all data is properly [0m         
      [39mreferenced[0m                             
      [39m- Follow the provided JSON schema [0m     
      [39mstructure[0m                              
      [39m- Include comprehensive references [0m    
      [39msection[0m                                
                                             
      [39mThe report must be scientifically [0m     
      [39mrigorous, evidence-based, and strictly [0m
      [39madhere to the provided schema [0m         
      [39mstructure.[0m                             
                                             
      [39m<[0m[35m/[0m[95minstructions[0m[39m>[0m                        
                                             
      [39m<additional_information>[0m               
      [39m- Use markdown to format your answers.[0m 
      [39m- The current time is [0m[1;36m2025[0m[39m-[0m[1;36m06[0m[39m-[0m[1;36m04[0m[39m [0m      
      [1;92m15:55:22[0m[39m.[0m[1;36m449394[0m[39m.[0m                       
      [39m<[0m[35m/[0m[95madditional_information[0m[1m>[0m              
2025-06-04 15:55:22,459 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== user =========              
2025-06-04 15:55:22,460 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m properties of water?                   
2025-06-04 15:55:22,514 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,515 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,515 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "GET /static/css/chat.css HTTP/1.1" 304 182 0.001015
2025-06-04 15:55:22,516 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,516 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,516 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "GET /static/css/style.css HTTP/1.1" 304 184 0.000507
2025-06-04 15:55:22,516 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,516 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,517 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000453
2025-06-04 15:55:22,525 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,525 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,525 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 15:55:22,525 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 15:55:22,525 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet OPEN data {'sid': 'r2AAzL-TEz3wUX15AAAE', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 15:55:22,525 - engineio.server - INFO - socket.py:90 - r2AAzL-TEz3wUX15AAAE: Received request to upgrade to websocket
2025-06-04 15:55:22,525 - engineio.server - INFO - socket.py:219 - r2AAzL-TEz3wUX15AAAE: Upgrade to websocket successful
2025-06-04 15:55:22,526 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:22,526 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:22,533 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:22] "GET /environments HTTP/1.1" 200 910 0.007601
2025-06-04 15:55:22,534 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet MESSAGE data 0
2025-06-04 15:55:22,534 - socketio.server - INFO - server.py:164 - emitting event "connected" to F0USAgYEs5D1GAA6AAAF [/]
2025-06-04 15:55:22,535 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet MESSAGE data 2["connected",{"sid":"F0USAgYEs5D1GAA6AAAF"}]
2025-06-04 15:55:22,535 - root - INFO - app.py:147 - user connected F0USAgYEs5D1GAA6AAAF
2025-06-04 15:55:22,535 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet MESSAGE data 0{"sid":"F0USAgYEs5D1GAA6AAAF"}
2025-06-04 15:55:22,578 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet MESSAGE data 2["join_task_room",{"task_id":"64"}]
2025-06-04 15:55:22,579 - socketio.server - INFO - server.py:576 - received event "join_task_room" from F0USAgYEs5D1GAA6AAAF [/]
2025-06-04 15:55:22,580 - socketio.server - INFO - server.py:284 - F0USAgYEs5D1GAA6AAAF is entering room task_64 [/]
2025-06-04 15:55:22,581 - root - INFO - app.py:156 - user joined task room: task_64
2025-06-04 15:55:22,581 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to F0USAgYEs5D1GAA6AAAF [/]
2025-06-04 15:55:22,581 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"64"}]
2025-06-04 15:55:23,660 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:55:23,664 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 15:55:23,665 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool Calls:                            
        - ID: [32m'call_o8gC4PBPGPFdMYTqM9U0HN6L'[0m
          Name: [32m'get_chemprop'[0m               
          Arguments: [32m'query_chemical: water'[0m 
2025-06-04 15:55:23,666 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:55:23,667 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1040[0m, [33moutput[0m=[1;36m18[0m, [33mtotal[0m=[1;36m1058[0m      
2025-06-04 15:55:23,667 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 15:55:23,668 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 15:55:23,668 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m1.[0m2032s 
2025-06-04 15:55:23,669 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m14.9596[0m 
      tokens/s                               
2025-06-04 15:55:23,669 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:55:23,670 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Running:                               
      [1;35mget_chemprop[0m[1m([0m[33mquery_chemical[0m=[35mwater[0m[1m)[0m     
2025-06-04 15:55:23,867 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:55:23,868 - celery.redirected - WARNING - log.py:232 - Attempt 1 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:55:25,892 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:55:25,893 - celery.redirected - WARNING - log.py:232 - Attempt 2 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:55:29,927 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2 "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 15:55:29,928 - celery.redirected - WARNING - log.py:232 - Attempt 3 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/H2O/h1H2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 15:55:29,928 - celery.redirected - WARNING - log.py:232 - All 3 attempts failed.
2025-06-04 15:55:29,931 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== tool =========              
2025-06-04 15:55:29,933 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool call Id:                          
      call_o8gC4PBPGPFdMYTqM9U0HN6L          
2025-06-04 15:55:29,934 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Chemprop API is temporarily            
      unavailable. Please try again later.   
2025-06-04 15:55:29,935 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 15:55:29,936 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m6.[0m2603s 
2025-06-04 15:55:29,937 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 15:55:33,348 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 15:55:33,351 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 15:55:33,355 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m I apologize, but I am currently unable 
      to retrieve detailed chemical          
      properties of water due to a temporary 
      outage of the chemical properties      
      database.                              
                                             
      However, I can provide a brief summary 
      based on well-established scientific   
      knowledge:                             
                                             
      Water [1m([0mH2O[1m)[0m — Key Chemical Properties: 
                                             
      - Molecular formula: H2O               
      - Molar mass: [1;36m18.015[0m g/mol             
      - Physical state: liquid at room       
      temperature [1m([0msolid below [1;36m0[0m°C, gas above
      [1;36m100[0m°C at [1;36m1[0m atm[1m)[0m                        
      - Density: approximately [1;36m1[0m g/cm³ at [1;36m4[0m°C
      - Boiling point: [1;36m100[0m°C [1m([0m[1;36m212[0m°F[1m)[0m at [1;36m1[0m atm
      pressure                               
      - Melting point: [1;36m0[0m°C [1m([0m[1;36m32[0m°F[1m)[0m at [1;36m1[0m atm   
      pressure                               
      - Polarity: Highly polar molecule,     
      enabling excellent solvent properties  
      - Hydrogen bonding: Forms strong       
      hydrogen bonds, leading to high surface
      tension, high heat capacity, and unique
      thermal properties                     
                                             
      If you would like a toxicity analysis  
      or clinical toxicity report for water  
      or another chemical, please specify the
      type of toxicity [1m([0me.g., acute toxicity,
      chronic toxicity, nephrotoxicity,      
      etc.[1m)[0m, and I will proceed with the     
      appropriate scientific workflow when   
      the chemical properties database is    
      accessible.                            
2025-06-04 15:55:33,356 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:55:33,356 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1080[0m, [33moutput[0m=[1;36m242[0m, [33mtotal[0m=[1;36m1322[0m,    
      [33mcached[0m=[1;36m1024[0m                            
2025-06-04 15:55:33,357 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m:   
      [1;36m1024[0m[1m}[0m                                  
2025-06-04 15:55:33,357 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 15:55:33,357 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m3.[0m4124s 
2025-06-04 15:55:33,358 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m70.9179[0m 
      tokens/s                               
2025-06-04 15:55:33,358 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 15:55:33,358 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -- OpenAI Response End --              
2025-06-04 15:55:33,359 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added RunResponse to Memory            
2025-06-04 15:55:33,893 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.agno.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-06-04 15:55:33,896 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run End:                        
      [93m4c054fd7-8840-4303-b721-8149454b9b2c[0m   
2025-06-04 15:55:33,897 - workflows.probra - INFO - probra.py:78 - File creating in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_823b6260b65a44b2a1899730ec5e2115.md for task 64
2025-06-04 15:55:33,897 - root - INFO - app.py:92 - Redis event: {'type': 'task_message', 'data': {'role': 'assistant', 'content': 'I apologize, but I am currently unable to retrieve detailed chemical properties of water due to a temporary outage of the chemical properties database.\n\nHowever, I can provide a brief summary based on well-established scientific knowledge:\n\nWater (H2O) — Key Chemical Properties:\n\n- Molecular formula: H2O\n- Molar mass: 18.015 g/mol\n- Physical state: liquid at room temperature (solid below 0°C, gas above 100°C at 1 atm)\n- Density: approximately 1 g/cm³ at 4°C\n- Boiling point: 100°C (212°F) at 1 atm pressure\n- Melting point: 0°C (32°F) at 1 atm pressure\n- Polarity: Highly polar molecule, enabling excellent solvent properties\n- Hydrogen bonding: Forms strong hydrogen bonds, leading to high surface tension, high heat capacity, and unique thermal properties\n\nIf you would like a toxicity analysis or clinical toxicity report for water or another chemical, please specify the type of toxicity (e.g., acute toxicity, chronic toxicity, nephrotoxicity, etc.), and I will proceed with the appropriate scientific workflow when the chemical properties database is accessible.'}, 'task_id': 64}
2025-06-04 15:55:33,897 - workflows.probra - INFO - probra.py:82 - File created in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_823b6260b65a44b2a1899730ec5e2115.md for task 64
2025-06-04 15:55:33,902 - root - INFO - message.py:48 - Storing message for task_id=64, user_id=None, role=assistant
2025-06-04 15:55:33,910 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:33,911 - root - INFO - message.py:71 - Stored message for task_id=64 from role=assistant
2025-06-04 15:55:33,911 - socketio.server - INFO - server.py:164 - emitting event "task_message" to task_64 [/]
2025-06-04 15:55:33,911 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet MESSAGE data 2["task_message",{"role":"assistant","content":"I apologize, but I am currently unable to retrieve detailed chemical properties of water due to a temporary outage of the chemical properties database.\n\nHowever, I can provide a brief summary based on well-established scientific knowledge:\n\nWater (H2O) \u2014 Key Chemical Properties:\n\n- Molecular formula: H2O\n- Molar mass: 18.015 g/mol\n- Physical state: liquid at room temperature (solid below 0\u00b0C, gas above 100\u00b0C at 1 atm)\n- Density: approximately 1 g/cm\u00b3 at 4\u00b0C\n- Boiling point: 100\u00b0C (212\u00b0F) at 1 atm pressure\n- Melting point: 0\u00b0C (32\u00b0F) at 1 atm pressure\n- Polarity: Highly polar molecule, enabling excellent solvent properties\n- Hydrogen bonding: Forms strong hydrogen bonds, leading to high surface tension, high heat capacity, and unique thermal properties\n\nIf you would like a toxicity analysis or clinical toxicity report for water or another chemical, please specify the type of toxicity (e.g., acute toxicity, chronic toxicity, nephrotoxicity, etc.), and I will proceed with the appropriate scientific workflow when the chemical properties database is accessible."}]
2025-06-04 15:55:33,912 - root - INFO - app.py:121 - task_message sent to task_64
2025-06-04 15:55:33,964 - botocore.tokens - INFO - tokens.py:305 - Loading cached SSO token for toxindex_dev
2025-06-04 15:55:35,420 - workflows.probra - INFO - probra.py:93 - File uploaded to S3: 64/probra_result_823b6260b65a44b2a1899730ec5e2115.md
2025-06-04 15:55:35,420 - workflows.probra - INFO - probra.py:107 - Task completed successfully
2025-06-04 15:55:35,421 - root - INFO - app.py:92 - Redis event: {'type': 'task_file', 'task_id': 64, 'data': {'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3', 'filename': 'probra_result_823b6260b65a44b2a1899730ec5e2115.md', 'filepath': '64/probra_result_823b6260b65a44b2a1899730ec5e2115.md', 's3_url': 'https://toxindex-environments-2.s3.amazonaws.com/64/probra_result_823b6260b65a44b2a1899730ec5e2115.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=liSP0voylfguZBq70dAf%2FE2GJWM%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070535'}}
2025-06-04 15:55:35,425 - celery.app.trace - INFO - trace.py:128 - Task workflows.probra.probra_task[b46eff0d-d256-4f40-a6ba-3f7dbd89d781] succeeded in 12.996078265001415s: {'done': True}
2025-06-04 15:55:35,429 - root - INFO - app.py:116 - task_file {"type": "task_file", "task_id": 64, "data": {"user_id": "cd8a52b1-b085-4756-9d42-5e70312267f3", "filename": "probra_result_823b6260b65a44b2a1899730ec5e2115.md", "filepath": "64/probra_result_823b6260b65a44b2a1899730ec5e2115.md", "s3_url": "https://toxindex-environments-2.s3.amazonaws.com/64/probra_result_823b6260b65a44b2a1899730ec5e2115.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=liSP0voylfguZBq70dAf%2FE2GJWM%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070535"}}
2025-06-04 15:55:35,429 - root - INFO - file.py:45 - DB ENV (create_file): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 15:55:35,429 - root - INFO - file.py:46 - Storing file for task_id=64, filename=probra_result_823b6260b65a44b2a1899730ec5e2115.md
2025-06-04 15:55:35,442 - root - DEBUG - datastore.py:56 - done
2025-06-04 15:55:35,442 - root - INFO - file.py:53 - Successfully inserted file for task_id=64, filename=probra_result_823b6260b65a44b2a1899730ec5e2115.md
2025-06-04 15:55:35,442 - root - INFO - file.py:104 - Stored file probra_result_823b6260b65a44b2a1899730ec5e2115.md for task_id=64
2025-06-04 15:55:35,442 - socketio.server - INFO - server.py:164 - emitting event "task_file" to task_64 [/]
2025-06-04 15:55:35,443 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet MESSAGE data 2["task_file",{"user_id":"cd8a52b1-b085-4756-9d42-5e70312267f3","filename":"probra_result_823b6260b65a44b2a1899730ec5e2115.md","filepath":"64/probra_result_823b6260b65a44b2a1899730ec5e2115.md","s3_url":"https://toxindex-environments-2.s3.amazonaws.com/64/probra_result_823b6260b65a44b2a1899730ec5e2115.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=liSP0voylfguZBq70dAf%2FE2GJWM%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070535"}]
2025-06-04 15:55:35,443 - root - INFO - app.py:121 - task_file sent to task_64
2025-06-04 15:55:36,196 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 15:55:36,196 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 15:55:36,196 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 15:55:36,196 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 15:55:36] "POST /log_tab_switch HTTP/1.1" 404 331 0.000797
2025-06-04 15:55:47,529 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:55:47,531 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:56:12,535 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:56:12,536 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:56:37,540 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:56:37,542 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:57:02,544 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:57:02,545 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:57:27,549 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:57:27,552 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:57:52,554 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:57:52,556 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:58:17,560 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:58:17,562 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:58:42,564 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:58:42,566 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:59:07,571 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:59:07,573 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:59:32,575 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:59:32,577 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 15:59:57,583 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 15:59:57,585 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 16:00:22,587 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 16:00:22,590 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 16:00:47,595 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 16:00:47,596 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 16:01:12,600 - engineio.server - INFO - socket.py:78 - r2AAzL-TEz3wUX15AAAE: Sending packet PING data None
2025-06-04 16:01:12,602 - engineio.server - INFO - socket.py:39 - r2AAzL-TEz3wUX15AAAE: Received packet PONG data 
2025-06-04 16:01:17,755 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:17,755 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:01:17,755 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:17,759 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:17,759 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:17,772 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:17] "GET /environment/16 HTTP/1.1" 200 13672 0.013098
2025-06-04 16:01:17,787 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:17,787 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:17,788 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:17] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000922
2025-06-04 16:01:17,788 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:17,788 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:17,789 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:17] "GET /static/css/style.css HTTP/1.1" 304 184 0.000628
2025-06-04 16:01:17,797 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:17,797 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:17,798 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 16:01:17,798 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 16:01:17,798 - engineio.server - INFO - socket.py:78 - TAQ-m_573jnxnbgTAAAG: Sending packet OPEN data {'sid': 'TAQ-m_573jnxnbgTAAAG', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 16:01:17,798 - engineio.server - INFO - socket.py:90 - TAQ-m_573jnxnbgTAAAG: Received request to upgrade to websocket
2025-06-04 16:01:17,798 - engineio.server - INFO - socket.py:219 - TAQ-m_573jnxnbgTAAAG: Upgrade to websocket successful
2025-06-04 16:01:17,798 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:17,798 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:17,807 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:17] "GET /environments HTTP/1.1" 200 910 0.008736
2025-06-04 16:01:17,807 - engineio.server - INFO - socket.py:39 - TAQ-m_573jnxnbgTAAAG: Received packet MESSAGE data 0
2025-06-04 16:01:17,808 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:01:17,808 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:17,809 - socketio.server - INFO - server.py:164 - emitting event "connected" to 22hq1pMo_vB7EF9kAAAH [/]
2025-06-04 16:01:17,809 - engineio.server - INFO - socket.py:78 - TAQ-m_573jnxnbgTAAAG: Sending packet MESSAGE data 2["connected",{"sid":"22hq1pMo_vB7EF9kAAAH"}]
2025-06-04 16:01:17,809 - root - INFO - app.py:147 - user connected 22hq1pMo_vB7EF9kAAAH
2025-06-04 16:01:17,809 - engineio.server - INFO - socket.py:78 - TAQ-m_573jnxnbgTAAAG: Sending packet MESSAGE data 0{"sid":"22hq1pMo_vB7EF9kAAAH"}
2025-06-04 16:01:36,271 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,271 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,271 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:01:36,272 - root - INFO - app.py:163 - task_create called with POST
2025-06-04 16:01:36,278 - root - INFO - task.py:65 - Creating new task with title='properties of vitami' for user_id=cd8a52b1-b085-4756-9d42-5e70312267f3
2025-06-04 16:01:36,287 - root - DEBUG - datastore.py:56 - done
2025-06-04 16:01:36,294 - root - INFO - task.py:85 - Successfully created task with id=65
2025-06-04 16:01:36,302 - root - DEBUG - datastore.py:56 - done
2025-06-04 16:01:36,314 - celery.worker.strategy - INFO - strategy.py:161 - Task workflows.probra.probra_task[3a932922-f03a-421f-9e27-1ae72e7f8fb9] received
2025-06-04 16:01:36,315 - workflows.probra - INFO - probra.py:41 - Starting probra task with payload: {'payload': 'properties of vitamin A?', 'sid': '22hq1pMo_vB7EF9kAAAH', 'task_id': 65, 'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3'}
2025-06-04 16:01:36,315 - workflows.probra - INFO - probra.py:50 - User query for deeptox_agent: properties of vitamin A?
2025-06-04 16:01:36,318 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent ID:                             
      [93m1dd81bea-0715-4989-a832-8914ff2d6c78[0m   
2025-06-04 16:01:36,319 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m **** Session ID: demo ***              
2025-06-04 16:01:36,320 - root - DEBUG - datastore.py:56 - done
2025-06-04 16:01:36,321 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "POST /task/new HTTP/1.1" 200 197 0.049994
2025-06-04 16:01:36,324 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:36,324 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:01:36,324 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:36,329 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,329 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,330 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -*- AgentSession loaded: demo          
2025-06-04 16:01:36,331 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run Start:                      
      [93m2979473c-3b06-4420-a0ae-cc465164a45b[0m   
2025-06-04 16:01:36,332 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m - OpenAI Response Start -              
2025-06-04 16:01:36,332 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Model: gpt-[1;36m4.1[0m-[1;36m2025[0m-[1;36m04[0m-[1;36m14[0m             
2025-06-04 16:01:36,332 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========= system ========              
2025-06-04 16:01:36,333 - root - INFO - message.py:61 - Retrieved 1 messages for task_id=65
2025-06-04 16:01:36,333 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 16:01:36,333 - root - INFO - file.py:80 - Calling get_files with task_id=65 (type: <class 'int'>)
2025-06-04 16:01:36,336 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=65: []
2025-06-04 16:01:36,336 - root - WARNING - file.py:87 - No files found in DB for task_id=65
2025-06-04 16:01:36,338 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:01:36,338 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:01:36,339 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m You are a specialized toxicology       
      research assistant with expertise in:  
      - Chemical toxicity analysis and risk  
      assessment                             
      - Scientific literature review and     
      synthesis                              
      - Statistical analysis of toxicity data
      - Regulatory compliance and safety     
      standards                              
                                             
      Your writing style is:                 
      - Scientifically rigorous and          
      evidence-based                         
      - Clear and precise in technical       
      terminology                            
      - Comprehensive in risk assessment     
      - Properly cited with academic sources 
                                             
      [1m<[0m[1;95minstructions[0m[39m>[0m                         
                                             
      [39mYou are a toxicology research writer [0m  
      [39mtasked with creating comprehensive [0m    
      [39mtoxicity reports.[0m                      
                                             
      [39mWorkflow:[0m                              
      [1;36m1[0m[39m. For any toxicity-related question, [0m 
      [39mfirst use get_chemprop to obtain the [0m  
      [39mchemical properties[0m                    
                                             
      [1;36m2[0m[39m. Use these properties to enhance your[0m
      [39msearch query for invoke deepsearch[0m     
      [39m    Perform initial search to gather [0m  
      [39mclinical evidence:[0m                     
      [39m   - Search for clinical studies and [0m  
      [39mcase reports[0m                           
      [39m   - Focus on finding:[0m                 
      [39m     * Sample sizes[0m                    
      [39m     * Number of positive cases[0m        
      [39m     * Study durations[0m                 
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m clinical trial [0m     
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m case study [0m         
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m adverse effects [0m    
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mincidence rate"[0m                        
                                             
      [1;36m3[0m[39m. Perform follow-up search to gather [0m 
      [39mmechanistic information:[0m               
      [39m   - Search for how chemical properties[0m
      [39mcontribute to the specific toxicity[0m    
      [39m   - Look for known mechanisms of the [0m 
      [39mspecific toxicity[0m                      
      [39m   - Find treatment protocols and [0m     
      [39moutcomes[0m                               
      [39m   - Use specific search terms like:[0m   
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m mechanism of [0m       
      [32m[[0m[32mtoxicity_type[0m[32m][0m[32m"[0m                       
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mpathway"[0m                               
      [39m     * [0m[32m"[0m[32m[[0m[32mchemical[0m[32m][0m[32m [0m[32m[[0m[32mtoxicity_type[0m[32m][0m[32m [0m    
      [32mtreatment protocol"[0m                    
                                             
      [1;36m4[0m[39m. Use the gathered data to:[0m           
      [39m   - Calculate beta distribution [0m      
      [39mparameters from actual clinical data[0m   
      [39m   - Create weighted risk estimates[0m    
      [39m   - Determine confidence intervals[0m    
      [39m   - Identify risk factors and [0m        
      [39mpopulations[0m                            
                                             
      [1;36m5[0m[39m. Format your final search query to [0m  
      [39minclude:[0m                               
      [39m   - How the chemical properties may [0m  
      [39mcontribute to the specific toxicity[0m    
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Clinical evidence and case studies[0m
      [39mwith specific data points[0m              
      [39m   - Beta distribution analysis based [0m 
      [39mon actual clinical data[0m                
      [39m   - Risk factors and populations at [0m  
      [39mrisk[0m                                   
                                             
      [39mWhen provided with a JSON report, [0m     
      [39mcreate a detailed markdown report that [0m
      [39mfollows this structure:[0m                
                                             
      [1;36m1[0m[39m. Chemical Properties and Toxicity [0m   
      [39mAnalysis[0m                               
      [39m   - Detailed analysis of how specific [0m
      [39mchemical properties contribute to the [0m 
      [39mtoxicity[0m                               
      [39m   - Known mechanisms of the specific [0m 
      [39mtoxicity based on these properties[0m     
      [39m   - Evidence and references for each [0m 
      [39mproperty-toxicity relationship[0m         
                                             
      [1;36m2[0m[39m. Clinical Evidence and Case Studies[0m  
      [39m   - Comprehensive review of clinical [0m 
      [39mevidence[0m                               
      [39m   - Detailed case studies[0m             
      [39m   - Treatment protocols and outcomes[0m  
      [39m   - Adverse effects documentation[0m     
      [39m   - For each study, extract:[0m          
      [39m     * Total sample size[0m               
      [39m     * Number of positive cases[0m        
      [39m     * Study duration[0m                  
      [39m     * Dosage information[0m              
      [39m     * Patient demographics[0m            
      [39m     * Risk factors[0m                    
                                             
      [1;36m3[0m[39m. Toxicity Risk Distribution[0m          
      [39m   - Beta distribution calculations [0m   
      [39mbased on actual clinical data:[0m         
      [39m     * Use sample sizes and positive [0m  
      [39mcases from clinical studies[0m            
      [39m     * Calculate α = number of positive[0m
      [39mcases + [0m[1;36m1[0m                              
      [39m     * Calculate β = [0m[1;39m([0m[39mtotal sample size[0m
      [39m- positive cases[0m[1;39m)[0m[39m + [0m[1;36m1[0m                  
      [39m     * Compute mean risk = α [0m[35m/[0m[39m [0m[1;39m([0m[39mα + β[0m[1;39m)[0m 
      [39m     * Calculate [0m[1;36m95[0m[39m% confidence [0m       
      [39minterval[0m                               
      [39m   - Include:[0m                          
      [39m     * Table of studies used for [0m      
      [39mcalculation[0m                            
      [39m     * Weighted average based on study [0m
      [39mquality and sample size[0m                
      [39m     * Confidence intervals for each [0m  
      [39mstudy[0m                                  
      [39m     * Combined risk estimate[0m          
      [39m   - Each calculation must be supported[0m
      [39mby:[0m                                    
      [39m     * Title of the study[0m              
      [39m     * URL or source[0m                   
      [39m     * Sample size and positive cases [0m 
      [39mused[0m                                   
      [39m     * How the data supports the [0m      
      [39mcalculation[0m                            
      [39m     * Relevance to the specific [0m      
      [39mchemical and toxicity type[0m             
                                             
      [1;36m4[0m[39m. Risk Assessment and Population [0m     
      [39mAnalysis[0m                               
      [39m   - High-risk population groups[0m       
      [39m   - Specific risk factors[0m             
      [39m   - Population-specific considerations[0m
      [39m   - Additional risk-related notes[0m     
                                             
      [39mFormat Requirements:[0m                   
      [39m- Use clear headers and subheaders[0m     
      [39m- Include proper academic citations[0m    
      [39m- Present statistical data with [0m       
      [39mconfidence intervals[0m                   
      [39m- Ensure all data is properly [0m         
      [39mreferenced[0m                             
      [39m- Follow the provided JSON schema [0m     
      [39mstructure[0m                              
      [39m- Include comprehensive references [0m    
      [39msection[0m                                
                                             
      [39mThe report must be scientifically [0m     
      [39mrigorous, evidence-based, and strictly [0m
      [39madhere to the provided schema [0m         
      [39mstructure.[0m                             
                                             
      [39m<[0m[35m/[0m[95minstructions[0m[39m>[0m                        
                                             
      [39m<additional_information>[0m               
      [39m- Use markdown to format your answers.[0m 
      [39m- The current time is [0m[1;36m2025[0m[39m-[0m[1;36m06[0m[39m-[0m[1;36m04[0m[39m [0m      
      [1;92m16:01:36[0m[39m.[0m[1;36m331159[0m[39m.[0m                       
      [39m<[0m[35m/[0m[95madditional_information[0m[1m>[0m              
2025-06-04 16:01:36,340 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== user =========              
2025-06-04 16:01:36,340 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m properties of vitamin A?               
2025-06-04 16:01:36,347 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "GET /task/65 HTTP/1.1" 200 16722 0.017478
2025-06-04 16:01:36,407 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,407 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,408 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "GET /static/css/style.css HTTP/1.1" 304 184 0.001016
2025-06-04 16:01:36,408 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,408 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,409 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.000620
2025-06-04 16:01:36,409 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,409 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,410 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000593
2025-06-04 16:01:36,422 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,422 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,422 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 16:01:36,422 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 16:01:36,422 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet OPEN data {'sid': '-ZhQL9aSih_bONtLAAAI', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 16:01:36,423 - engineio.server - INFO - socket.py:90 - -ZhQL9aSih_bONtLAAAI: Received request to upgrade to websocket
2025-06-04 16:01:36,423 - engineio.server - INFO - socket.py:219 - -ZhQL9aSih_bONtLAAAI: Upgrade to websocket successful
2025-06-04 16:01:36,426 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:01:36,427 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:01:36,438 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:01:36] "GET /environments HTTP/1.1" 200 910 0.012141
2025-06-04 16:01:36,439 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet MESSAGE data 0
2025-06-04 16:01:36,440 - socketio.server - INFO - server.py:164 - emitting event "connected" to hD7kb6leeBSl3vu6AAAJ [/]
2025-06-04 16:01:36,440 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet MESSAGE data 2["connected",{"sid":"hD7kb6leeBSl3vu6AAAJ"}]
2025-06-04 16:01:36,441 - root - INFO - app.py:147 - user connected hD7kb6leeBSl3vu6AAAJ
2025-06-04 16:01:36,441 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet MESSAGE data 0{"sid":"hD7kb6leeBSl3vu6AAAJ"}
2025-06-04 16:01:36,484 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet MESSAGE data 2["join_task_room",{"task_id":"65"}]
2025-06-04 16:01:36,485 - socketio.server - INFO - server.py:576 - received event "join_task_room" from hD7kb6leeBSl3vu6AAAJ [/]
2025-06-04 16:01:36,486 - socketio.server - INFO - server.py:284 - hD7kb6leeBSl3vu6AAAJ is entering room task_65 [/]
2025-06-04 16:01:36,487 - root - INFO - app.py:156 - user joined task room: task_65
2025-06-04 16:01:36,487 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to hD7kb6leeBSl3vu6AAAJ [/]
2025-06-04 16:01:36,487 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"65"}]
2025-06-04 16:01:37,486 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 16:01:37,488 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 16:01:37,489 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool Calls:                            
        - ID: [32m'call_0v8Hao28I8iDLiRIodUgDYd0'[0m
          Name: [32m'get_chemprop'[0m               
          Arguments: [32m'query_chemical: vitamin[0m
      [32mA'[0m                                     
2025-06-04 16:01:37,490 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 16:01:37,491 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1041[0m, [33moutput[0m=[1;36m20[0m, [33mtotal[0m=[1;36m1061[0m      
2025-06-04 16:01:37,492 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 16:01:37,493 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 16:01:37,495 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m1.[0m1467s 
2025-06-04 16:01:37,496 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m17.4418[0m 
      tokens/s                               
2025-06-04 16:01:37,496 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 16:01:37,498 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Running:                               
      [1;35mget_chemprop[0m[1m([0m[33mquery_chemical[0m=[35mvitamin[0m A[1m)[0m 
2025-06-04 16:01:37,690 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+ "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 16:01:37,690 - celery.redirected - WARNING - log.py:232 - Attempt 1 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 16:01:39,715 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+ "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 16:01:39,716 - celery.redirected - WARNING - log.py:232 - Attempt 2 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 16:01:43,750 - httpx - INFO - _client.py:1740 - HTTP Request: GET http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+ "HTTP/1.1 503 Service Temporarily Unavailable"
2025-06-04 16:01:43,751 - celery.redirected - WARNING - log.py:232 - Attempt 3 failed: Server error '503 Service Temporarily Unavailable' for url 'http://chemprop-transformer-alb-2126755060.us-east-1.elb.amazonaws.com/predict?property_token=5042&inchi=InChI=1S/C20H30O/c1-16(8-6-9-17(2)13-15-21)11-12-19-18(3)10-7-14-20(19,4)5/h6,8-9,11-13,21H,7,10,14-15H2,1-5H3/b9-6+,12-11+,16-8+,17-13+'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-06-04 16:01:43,751 - celery.redirected - WARNING - log.py:232 - All 3 attempts failed.
2025-06-04 16:01:43,754 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ========== tool =========              
2025-06-04 16:01:43,756 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Tool call Id:                          
      call_0v8Hao28I8iDLiRIodUgDYd0          
2025-06-04 16:01:43,757 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Chemprop API is temporarily            
      unavailable. Please try again later.   
2025-06-04 16:01:43,758 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 16:01:43,759 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m6.[0m2559s 
2025-06-04 16:01:43,760 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *****  TOOL METRICS  ****              
2025-06-04 16:01:47,931 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-04 16:01:47,938 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m ======= assistant =======              
2025-06-04 16:01:47,941 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m I am currently unable to access the    
      detailed chemical properties database  
      for vitamin A due to a temporary       
      service issue. However, I can provide  
      well-established scientific information
      regarding the chemical properties of   
      vitamin A:                             
                                             
      Vitamin A refers to a group of         
      fat-soluble retinoids, including       
      retinol, retinal, and retinyl esters.  
      The most biologically active form is   
      retinol.                               
                                             
      Key Chemical Properties of Vitamin A:  
      - Molecular formula [1m([0mretinol[1m)[0m: C20H30O 
      - Structure: Retinol consists of a     
      β-ionone ring attached to an isoprenoid
      chain with an alcohol functional group.
      - Solubility: Fat-soluble, insoluble in
      water, but soluble in organic solvents 
      [1m([0me.g., ethanol, chloroform, fat[1m)[0m.      
      - Stability: Sensitive to oxidation    
      [1m([0mlight and air exposure can degrade    
      it[1m)[0m, relatively heat-stable in food    
      matrices.                              
      - Isomerism: Exists as different       
      isomers [1m([0mcis and trans forms[1m)[0m;         
      all-trans-retinol is the most active   
      form.                                  
      - Biochemical Role: Essential for      
      vision [1m([0mas retinal component of        
      rhodopsin[1m)[0m, immune function, cellular  
      communication, and skin integrity.     
                                             
      If you require an in-depth toxicity    
      analysis or details on how these       
      properties relate to toxicity, please  
      clarify your focus [1m([0me.g.,              
      hepatotoxicity, teratogenicity,        
      neurotoxicity[1m)[0m. This will allow me to  
      tailor the response with advanced      
      clinical evidence and risk assessment  
      once the chemical property database is 
      accessible.                            
2025-06-04 16:01:47,941 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 16:01:47,942 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens:                              
      [33minput[0m=[1;36m1083[0m, [33moutput[0m=[1;36m292[0m, [33mtotal[0m=[1;36m1375[0m     
2025-06-04 16:01:47,942 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Prompt tokens details:               
      [1m{[0m[32m'audio_tokens'[0m: [1;36m0[0m, [32m'cached_tokens'[0m: [1;36m0[0m[1m}[0m
2025-06-04 16:01:47,943 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Completion tokens details:           
      [1m{[0m[32m'accepted_prediction_tokens'[0m: [1;36m0[0m,      
      [32m'audio_tokens'[0m: [1;36m0[0m, [32m'reasoning_tokens'[0m: 
      [1;36m0[0m, [32m'rejected_prediction_tokens'[0m: [1;36m0[0m[1m}[0m    
2025-06-04 16:01:47,944 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Time:                        [1;36m4.[0m1729s 
2025-06-04 16:01:47,944 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m * Tokens per second:           [1;36m69.9759[0m 
      tokens/s                               
2025-06-04 16:01:47,944 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m *******  METRICS  *******              
2025-06-04 16:01:47,945 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m -- OpenAI Response End --              
2025-06-04 16:01:47,945 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m Added RunResponse to Memory            
2025-06-04 16:01:48,163 - httpx - INFO - _client.py:1025 - HTTP Request: POST https://api.agno.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-06-04 16:01:48,166 - celery.redirected - WARNING - log.py:232 - [32mDEBUG[0m  Agent Run End:                        
      [93m2979473c-3b06-4420-a0ae-cc465164a45b[0m   
2025-06-04 16:01:48,167 - workflows.probra - INFO - probra.py:78 - File creating in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_36e5a09951954a8b9dae21798527b205.md for task 65
2025-06-04 16:01:48,167 - root - INFO - app.py:92 - Redis event: {'type': 'task_message', 'data': {'role': 'assistant', 'content': 'I am currently unable to access the detailed chemical properties database for vitamin A due to a temporary service issue. However, I can provide well-established scientific information regarding the chemical properties of vitamin A:\n\nVitamin A refers to a group of fat-soluble retinoids, including retinol, retinal, and retinyl esters. The most biologically active form is retinol.\n\nKey Chemical Properties of Vitamin A:\n- Molecular formula (retinol): C20H30O\n- Structure: Retinol consists of a β-ionone ring attached to an isoprenoid chain with an alcohol functional group.\n- Solubility: Fat-soluble, insoluble in water, but soluble in organic solvents (e.g., ethanol, chloroform, fat).\n- Stability: Sensitive to oxidation (light and air exposure can degrade it), relatively heat-stable in food matrices.\n- Isomerism: Exists as different isomers (cis and trans forms); all-trans-retinol is the most active form.\n- Biochemical Role: Essential for vision (as retinal component of rhodopsin), immune function, cellular communication, and skin integrity.\n\nIf you require an in-depth toxicity analysis or details on how these properties relate to toxicity, please clarify your focus (e.g., hepatotoxicity, teratogenicity, neurotoxicity). This will allow me to tailor the response with advanced clinical evidence and risk assessment once the chemical property database is accessible.'}, 'task_id': 65}
2025-06-04 16:01:48,168 - workflows.probra - INFO - probra.py:82 - File created in tmp: /home/kyu/Documents/toxindex/tmp/probra_result_36e5a09951954a8b9dae21798527b205.md for task 65
2025-06-04 16:01:48,173 - root - INFO - message.py:48 - Storing message for task_id=65, user_id=None, role=assistant
2025-06-04 16:01:48,182 - root - DEBUG - datastore.py:56 - done
2025-06-04 16:01:48,182 - root - INFO - message.py:71 - Stored message for task_id=65 from role=assistant
2025-06-04 16:01:48,182 - socketio.server - INFO - server.py:164 - emitting event "task_message" to task_65 [/]
2025-06-04 16:01:48,182 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet MESSAGE data 2["task_message",{"role":"assistant","content":"I am currently unable to access the detailed chemical properties database for vitamin A due to a temporary service issue. However, I can provide well-established scientific information regarding the chemical properties of vitamin A:\n\nVitamin A refers to a group of fat-soluble retinoids, including retinol, retinal, and retinyl esters. The most biologically active form is retinol.\n\nKey Chemical Properties of Vitamin A:\n- Molecular formula (retinol): C20H30O\n- Structure: Retinol consists of a \u03b2-ionone ring attached to an isoprenoid chain with an alcohol functional group.\n- Solubility: Fat-soluble, insoluble in water, but soluble in organic solvents (e.g., ethanol, chloroform, fat).\n- Stability: Sensitive to oxidation (light and air exposure can degrade it), relatively heat-stable in food matrices.\n- Isomerism: Exists as different isomers (cis and trans forms); all-trans-retinol is the most active form.\n- Biochemical Role: Essential for vision (as retinal component of rhodopsin), immune function, cellular communication, and skin integrity.\n\nIf you require an in-depth toxicity analysis or details on how these properties relate to toxicity, please clarify your focus (e.g., hepatotoxicity, teratogenicity, neurotoxicity). This will allow me to tailor the response with advanced clinical evidence and risk assessment once the chemical property database is accessible."}]
2025-06-04 16:01:48,183 - root - INFO - app.py:121 - task_message sent to task_65
2025-06-04 16:01:48,362 - workflows.probra - INFO - probra.py:93 - File uploaded to S3: 65/probra_result_36e5a09951954a8b9dae21798527b205.md
2025-06-04 16:01:48,362 - workflows.probra - INFO - probra.py:107 - Task completed successfully
2025-06-04 16:01:48,363 - root - INFO - app.py:92 - Redis event: {'type': 'task_file', 'task_id': 65, 'data': {'user_id': 'cd8a52b1-b085-4756-9d42-5e70312267f3', 'filename': 'probra_result_36e5a09951954a8b9dae21798527b205.md', 'filepath': '65/probra_result_36e5a09951954a8b9dae21798527b205.md', 's3_url': 'https://toxindex-environments-2.s3.amazonaws.com/65/probra_result_36e5a09951954a8b9dae21798527b205.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=Dg7yL4qghBRDvKqWRsg%2BytA%2BEzI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070908'}}
2025-06-04 16:01:48,365 - celery.app.trace - INFO - trace.py:128 - Task workflows.probra.probra_task[3a932922-f03a-421f-9e27-1ae72e7f8fb9] succeeded in 12.05023833100131s: {'done': True}
2025-06-04 16:01:48,369 - root - INFO - app.py:116 - task_file {"type": "task_file", "task_id": 65, "data": {"user_id": "cd8a52b1-b085-4756-9d42-5e70312267f3", "filename": "probra_result_36e5a09951954a8b9dae21798527b205.md", "filepath": "65/probra_result_36e5a09951954a8b9dae21798527b205.md", "s3_url": "https://toxindex-environments-2.s3.amazonaws.com/65/probra_result_36e5a09951954a8b9dae21798527b205.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=Dg7yL4qghBRDvKqWRsg%2BytA%2BEzI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070908"}}
2025-06-04 16:01:48,369 - root - INFO - file.py:45 - DB ENV (create_file): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 16:01:48,369 - root - INFO - file.py:46 - Storing file for task_id=65, filename=probra_result_36e5a09951954a8b9dae21798527b205.md
2025-06-04 16:01:48,379 - root - DEBUG - datastore.py:56 - done
2025-06-04 16:01:48,380 - root - INFO - file.py:53 - Successfully inserted file for task_id=65, filename=probra_result_36e5a09951954a8b9dae21798527b205.md
2025-06-04 16:01:48,380 - root - INFO - file.py:104 - Stored file probra_result_36e5a09951954a8b9dae21798527b205.md for task_id=65
2025-06-04 16:01:48,380 - socketio.server - INFO - server.py:164 - emitting event "task_file" to task_65 [/]
2025-06-04 16:01:48,380 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet MESSAGE data 2["task_file",{"user_id":"cd8a52b1-b085-4756-9d42-5e70312267f3","filename":"probra_result_36e5a09951954a8b9dae21798527b205.md","filepath":"65/probra_result_36e5a09951954a8b9dae21798527b205.md","s3_url":"https://toxindex-environments-2.s3.amazonaws.com/65/probra_result_36e5a09951954a8b9dae21798527b205.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=Dg7yL4qghBRDvKqWRsg%2BytA%2BEzI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070908"}]
2025-06-04 16:01:48,381 - root - INFO - app.py:121 - task_file sent to task_65
2025-06-04 16:02:01,425 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:02:01,427 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:02:26,428 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:02:26,429 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:02:51,434 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:02:51,436 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:03:16,437 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:03:16,440 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:03:41,455 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:03:41,457 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:04:06,460 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:04:06,462 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:04:31,474 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:04:31,476 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:04:56,480 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:04:56,483 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:05:21,485 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:05:21,487 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:05:46,492 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:05:46,494 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:06:11,497 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:06:11,499 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:06:36,505 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:06:36,507 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:07:01,511 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:07:01,513 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:07:16,962 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:16,962 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:16,962 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:07:16,964 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:16] "POST /log_tab_switch HTTP/1.1" 404 331 0.001918
2025-06-04 16:07:17,988 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:17,988 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:17,988 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:07:17,989 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:17] "POST /log_tab_switch HTTP/1.1" 404 331 0.001336
2025-06-04 16:07:26,515 - engineio.server - INFO - socket.py:78 - -ZhQL9aSih_bONtLAAAI: Sending packet PING data None
2025-06-04 16:07:26,517 - engineio.server - INFO - socket.py:39 - -ZhQL9aSih_bONtLAAAI: Received packet PONG data 
2025-06-04 16:07:30,774 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:07:30,774 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:07:30,774 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:07:30,780 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,780 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,786 - root - INFO - message.py:61 - Retrieved 2 messages for task_id=65
2025-06-04 16:07:30,786 - root - INFO - file.py:79 - DB ENV (get_files): PGHOST=localhost, PGPORT=5433, PGDATABASE=toxindex, PGUSER=postgres, PGPASSWORD=devpassword
2025-06-04 16:07:30,786 - root - INFO - file.py:80 - Calling get_files with task_id=65 (type: <class 'int'>)
2025-06-04 16:07:30,791 - root - INFO - file.py:85 - Raw rows returned from DB for task_id=65: [[38, 65, UUID('cd8a52b1-b085-4756-9d42-5e70312267f3'), 'probra_result_36e5a09951954a8b9dae21798527b205.md', '65/probra_result_36e5a09951954a8b9dae21798527b205.md', 'https://toxindex-environments-2.s3.amazonaws.com/65/probra_result_36e5a09951954a8b9dae21798527b205.md?AWSAccessKeyId=ASIAQ72ED6HZC4OF2EOC&Signature=Dg7yL4qghBRDvKqWRsg%2BytA%2BEzI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEFwaCXVzLWVhc3QtMSJIMEYCIQCa%2FFn%2BmEIEgcJsTiUDERZVRpBmi6%2BC3tfHO2M4086JcgIhAL3gvVUpjyrJG%2FzbOcjqp1CiKcuFEoaw0GXJVY0Z%2FCJrKvUCCDUQABoMMDY4MzI1NDcwNzA2IgzMf0P0ZlZGoiT%2FkTsq0gKslz9lEo0HGayOLJY7vXOTnOwfdxiinPqKxOZtYIzuB8eNq%2FIOkafZSY15Pn6ZBw4bZ5hFoTvrwn3yyShZmK0QR%2BT31d%2BbEGfS7h62ilWm6EOtw%2F9gDxg8lBgJZ%2FN38wiVuzbk87bxnLnRbdaMWogdVE4NUUm4fW12f1o8VjZrxabkgYpwScyM3oBgHhr0nZmbVncwxxKTuAq8zT6ZEcermlBAC3vept1WiKUlX2XrZCXE0egup5d3KStlFxzNHr1OInSR0P3Z5df0LZhSsa%2F%2B5iz2q7L8KNXzFXfFQEvJbvGAv4U8jQcYb7h3upkc5VGhgspemkeBSzKkzJ1rz81ZgTprPuF31cROgqhxsf3p9ZNgxcI7lzD%2F2N9Drd7ACY9DhDLoZbKifjAehuQLfxS%2Bve4E6PNN8yrbqiUhjVZ6n4pE1UdkBDnXUCKi5ipolRG4mTC2yYLCBjqmAelPPBOBc4NZ%2B0LROpMhj%2BEfn1BVPJE08CjVCwaUqXiTyVntPXlSM%2BG1sxAJw5CQRyPTqoRcFidn4bUBIDU%2FAaVYKCmvLkORXGN67NR8jM%2BxnO0vXhhHC15ORDbhVvdMcvJvsl18ZS7UbG4fRPlrh4AE9OZGGsj%2FBRETzQmopR1ZlnXr4kwBQ4vdzw%2BpJXFNPMeRSzVW%2BA%2FJWylcBEjOeluaQgNab1Q%3D&Expires=1749070908', datetime.datetime(2025, 6, 4, 16, 1, 48, 373596)]]
2025-06-04 16:07:30,791 - root - INFO - file.py:89 - Found 1 files in DB for task_id=65
2025-06-04 16:07:30,791 - root - WARNING - file.py:125 - Could not read file 65/probra_result_36e5a09951954a8b9dae21798527b205.md: [Errno 2] No such file or directory: '65/probra_result_36e5a09951954a8b9dae21798527b205.md'
2025-06-04 16:07:30,798 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:30] "GET /task/65 HTTP/1.1" 200 21436 0.017381
2025-06-04 16:07:30,819 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,819 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,820 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:30] "GET /static/css/style.css HTTP/1.1" 304 184 0.001029
2025-06-04 16:07:30,820 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,820 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,821 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:30] "GET /static/css/chat.css HTTP/1.1" 304 182 0.000638
2025-06-04 16:07:30,821 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,821 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,822 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:30] "GET /static/js/socket.io.4.7.2.min.js HTTP/1.1" 304 198 0.001053
2025-06-04 16:07:30,833 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,833 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,833 - geventwebsocket.handler - DEBUG - handler.py:151 - Attempting to upgrade connection
2025-06-04 16:07:30,833 - geventwebsocket.handler - DEBUG - handler.py:230 - WebSocket request accepted, switching protocols
2025-06-04 16:07:30,833 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet OPEN data {'sid': 'DDgXGRvSwpHCfeHkAAAK', 'upgrades': [], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-06-04 16:07:30,833 - engineio.server - INFO - socket.py:90 - DDgXGRvSwpHCfeHkAAAK: Received request to upgrade to websocket
2025-06-04 16:07:30,833 - engineio.server - INFO - socket.py:219 - DDgXGRvSwpHCfeHkAAAK: Upgrade to websocket successful
2025-06-04 16:07:30,837 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:30,837 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:30,838 - geventwebsocket.handler - DEBUG - websocket.py:366 - Failed to write closing frame -> closing socket
2025-06-04 16:07:30,838 - geventwebsocket.handler - DEBUG - websocket.py:368 - Closed WebSocket
2025-06-04 16:07:30,846 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:30] "GET /environments HTTP/1.1" 200 910 0.009043
2025-06-04 16:07:30,847 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet MESSAGE data 0
2025-06-04 16:07:30,847 - socketio.server - INFO - server.py:164 - emitting event "connected" to zF4UA3A0zp7AGamRAAAL [/]
2025-06-04 16:07:30,848 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet MESSAGE data 2["connected",{"sid":"zF4UA3A0zp7AGamRAAAL"}]
2025-06-04 16:07:30,848 - root - INFO - app.py:147 - user connected zF4UA3A0zp7AGamRAAAL
2025-06-04 16:07:30,848 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet MESSAGE data 0{"sid":"zF4UA3A0zp7AGamRAAAL"}
2025-06-04 16:07:30,891 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet MESSAGE data 2["join_task_room",{"task_id":"65"}]
2025-06-04 16:07:30,892 - socketio.server - INFO - server.py:576 - received event "join_task_room" from zF4UA3A0zp7AGamRAAAL [/]
2025-06-04 16:07:30,893 - socketio.server - INFO - server.py:284 - zF4UA3A0zp7AGamRAAAL is entering room task_65 [/]
2025-06-04 16:07:30,894 - root - INFO - app.py:156 - user joined task room: task_65
2025-06-04 16:07:30,894 - socketio.server - INFO - server.py:164 - emitting event "joined_task_room" to zF4UA3A0zp7AGamRAAAL [/]
2025-06-04 16:07:30,894 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet MESSAGE data 2["joined_task_room",{"task_id":"65"}]
2025-06-04 16:07:31,911 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:07:31,912 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:07:31,912 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:07:31,913 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:07:31] "POST /log_tab_switch HTTP/1.1" 404 331 0.001723
2025-06-04 16:07:55,838 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:07:55,840 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
2025-06-04 16:08:20,842 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:08:20,843 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
2025-06-04 16:08:45,849 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:08:45,850 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
2025-06-04 16:09:10,447 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:09:10,447 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:09:10,447 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:09:10,448 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:09:10] "POST /log_tab_switch HTTP/1.1" 404 331 0.001029
2025-06-04 16:09:10,852 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:09:10,853 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
2025-06-04 16:09:12,381 - geventwebsocket.handler - DEBUG - handler.py:68 - Initializing WebSocket
2025-06-04 16:09:12,381 - geventwebsocket.handler - DEBUG - handler.py:100 - Validating WebSocket request
2025-06-04 16:09:12,382 - geventwebsocket.handler - DEBUG - handler.py:104 - Can only upgrade connection if using GET method.
2025-06-04 16:09:12,383 - geventwebsocket.handler - INFO - handler.py:242 - 127.0.0.1 - - [2025-06-04 16:09:12] "POST /log_tab_switch HTTP/1.1" 404 331 0.001680
2025-06-04 16:09:35,860 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:09:35,861 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
2025-06-04 16:10:00,865 - engineio.server - INFO - socket.py:78 - DDgXGRvSwpHCfeHkAAAK: Sending packet PING data None
2025-06-04 16:10:00,866 - engineio.server - INFO - socket.py:39 - DDgXGRvSwpHCfeHkAAAK: Received packet PONG data 
